<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" 
lang="en"><head>

	
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
				<meta name="keywords" content="GMF Newsgroup Q and A">
		<link rel="shortcut icon" href="http://wiki.eclipse.org/favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" 
href="http://wiki.eclipse.org/opensearch_desc.php" title="Eclipsepedia 
(English)">
<link rel="alternate" type="application/rss+xml" title="Eclipsepedia RSS
 Feed" 
href="http://wiki.eclipse.org/index.php?title=Special:Recentchanges&amp;feed=rss">
<link rel="alternate" type="application/atom+xml" title="Eclipsepedia 
Atom Feed" 
href="http://wiki.eclipse.org/index.php?title=Special:Recentchanges&amp;feed=atom">
	
		
		<title>GMF Newsgroup Q and A - Eclipsepedia</title>

		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins/eclipsenova/novaWide.css?116"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" 
href="GMF_Newsgroup_Q_and_A_fichiers/eclipsenovaPrint.css">
		<link rel="stylesheet" type="text/css" media="handheld" 
href="GMF_Newsgroup_Q_and_A_fichiers/handheld.css">
		<link rel="stylesheet" type="text/css" 
href="GMF_Newsgroup_Q_and_A_fichiers/header.css" media="screen">
		<link rel="stylesheet" type="text/css" 
href="GMF_Newsgroup_Q_and_A_fichiers/tabs.css" media="screen">
		<link rel="stylesheet" type="text/css" 
href="GMF_Newsgroup_Q_and_A_fichiers/visual.css" media="screen">
		<link rel="stylesheet" type="text/css" 
href="GMF_Newsgroup_Q_and_A_fichiers/layout.css" media="screen">
		<link rel="stylesheet" type="text/css" 
href="GMF_Newsgroup_Q_and_A_fichiers/footer.css" media="screen">
	        <!--[if IE]><link rel="stylesheet" type="text/css" href="/skins/eclipsenova/IEpngfix.css" media="screen" /><![endif]-->
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/eclipsenova/IE50Fixes.css?116";</style> <![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins/eclipsenova/IE55Fixes.css?116";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins/eclipsenova/IE60Fixes.css?116";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins/eclipsenova/IE70Fixes.css?116";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?116"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">/*<![CDATA[*/
var skin = "eclipsenova";
var stylepath = "/skins";
var wgArticlePath = "/$1";
var wgScriptPath = "";
var wgScript = "/index.php";
var wgServer = "http://wiki.eclipse.org";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "GMF_Newsgroup_Q_and_A";
var wgTitle = "GMF Newsgroup Q and A";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "3793";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "150907";
var wgVersion = "1.12.0";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
/*]]>*/</script>
                
		<script type="text/javascript" src="GMF_Newsgroup_Q_and_A_fichiers/wikibits.js"><!-- wikibits js --></script>

<!-- Performance mods similar to those for bug 166401 -->
		<script type="text/javascript" src="GMF_Newsgroup_Q_and_A_fichiers/index.js"><!-- site js --></script>

		<!-- Head Scripts -->
				<script type="text/javascript" src="GMF_Newsgroup_Q_and_A_fichiers/ajax.js"></script>
<style type="text/css">/*<![CDATA[*/
.source-java {line-height: normal; font-size: medium;}
.source-java li {line-height: normal;}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for java
 * CSS class: source-java, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie (http://qbnz.com/highlighter)
 */
.source-java .de1, .source-java .de2 {font-family: 'Courier New', Courier, monospace; font-weight: normal;}
.source-java  {}
.source-java .head {}
.source-java .foot {}
.source-java .imp {font-weight: bold; color: red;}
.source-java .ln-xtra {color: #cc0; background-color: #ffc;}
.source-java li {font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;}
.source-java li.li2 {font-weight: bold;}
.source-java .kw1 {color: #7F0055; font-weight: bold;}
.source-java .kw2 {color: #7F0055; font-weight: bold;}
.source-java .kw3 {color: #000000; font-weight: normal}
.source-java .kw4 {color: #7F0055; font-weight: bold;}
.source-java .co1 {color: #3F7F5F; font-style: italic;}
.source-java .co2 {color: #3F7F5F;}
.source-java .co3 {color: #3F7F5F; font-style: italic; font-weight: bold;}
.source-java .coMULTI {color: #3F5FBF; font-style: italic;}
.source-java .es0 {color: #000000;}
.source-java .br0 {color: #000000;}
.source-java .st0 {color: #2A00ff;}
.source-java .nu0 {color: #000000;}
.source-java .me1 {color: #000000;}
.source-java .me2 {color: #000000;}

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style><link rel="stylesheet" type="text/css" href="">	</head><body 
class="mediawiki ns-0 ltr page-GMF_Newsgroup_Q_and_A">
	<div id="globalWrapper">


		<div id="column-one">
<!-- Eclipse Additions for the Top Nav start here M. Ward-->

		      <div id="header">
               <div id="header-graphic">
                 <img src="GMF_Newsgroup_Q_and_A_fichiers/eclipse.png" 
alt="Eclipse Wiki">
               </div>
<!-- Pulled 101409 Mward	   -->
            
            <div class="portlet" id="p-personal">
              <div class="pBody">
              <ul>
                <li id="pt-login"><a 
href="http://wiki.eclipse.org/index.php?title=Special:Userlogin&amp;returnto=GMF_Newsgroup_Q_and_A">Log
 in</a></li>
                      </ul>
              </div>
            </div>

            <div id="header-icons">
	      <div id="sites">
              <ul id="sitesUL">
                <li><a href="http://www.eclipse.org/"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/eclipseIcon.png" alt="Eclipse 
Foundation" title="Eclipse Foundation" height="28" width="28"><div>Eclipse
 Foundation</div></a></li>
                <li><a href="http://marketplace.eclipse.org/"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/marketplace.png" alt="Eclipse 
Marketplace" title="Eclipse Marketplace" height="28" width="28"><div>Eclipse
 Marketplace</div></a></li>
                <li><a href="https://bugs.eclipse.org/bugs"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/system-search-bw.png" alt="Bugzilla"
 title="Bugzilla" height="28" width="28"><div>Bugzilla</div></a></li>
                <li><a href="http://live.eclipse.org/"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/audio-input-microphone-bw.png" 
alt="Live" title="Live" height="28" width="28"><div>Eclipse Live</div></a></li>
                <li><a href="http://planeteclipse.org/"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/audio-card.png" alt="PlanetEclipse" 
title="Planet" height="28" width="28"><div>Planet Eclipse</div></a></li>
                <li><a href="http://portal.eclipse.org/"><img 
src="GMF_Newsgroup_Q_and_A_fichiers/preferences-system-network-proxy-bw.png"
 alt="Portal" title="Portal" height="28" width="28"></a><div><a 
href="http://portal.eclipse.org/">My Foundation Portal</a></div></li>
              </ul>
              </div>
            </div>
        </div> 
<!-- NEW HEADER STUFF HERE -->
       <div id="header-menu">
         <div id="header-nav">
               <ul> 		 <li><a class="first_one" 
href="http://wiki.eclipse.org/" target="_self">Home</a></li>            
      <li><a href="http://www.eclipse.org/downloads/" target="_self">Downloads</a></li>
 
                 <li><a href="http://www.eclipse.org/users/" 
target="_self">Users</a></li> 
                 <li><a href="http://www.eclipse.org/membership/" 
target="_self">Members</a></li> 
                 <li><a 
href="http://wiki.eclipse.org/index.php/Development_Resources" 
target="_self">Committers</a></li> 
                 <li><a href="http://www.eclipse.org/resources/" 
target="_self">Resources</a></li> 
                 <li><a href="http://www.eclipse.org/projects/" 
target="_self">Projects</a></li> 
                 <li><a href="http://www.eclipse.org/org/" 
target="_self">About Us</a></li> 
                </ul>
         </div>
         <div id="header-utils">
<!-- moved the search window here -->
                           <form action="/Special:Search">
                  <input class="input" name="search" accesskey="f" 
type="text">
                    <input onclick="this.submit();" name="go" 
id="searchGoButton" class="button" title="Go to a page with this exact 
name if one exists" value="Go" type="submit">&nbsp;
                    <input onclick="this.submit();" name="fulltext" 
class="button" id="mw-searchButton" title="Search Eclipsepedia for this 
text" value="Search" type="submit">
                </form>
		 </div>
      </div>


<!-- Eclipse Additions for the Header stop here -->
<!-- Additions and mods for leftside nav Start here -->

<!--Started nav  rip here-->
<!-- these are the nav controls main page, changes etc -->
    <div id="novaContent" class="faux">
            <div id="leftcol">
          <ul id="leftnav">
<!-- these are the page controls, edit history etc -->
            	  <li class="separator"><a class="separator">Navigation 
&nbsp;&nbsp;</a></li>
<a class="separator">                                </a><li 
id="n-mainpage"><a href="http://wiki.eclipse.org/Main_Page">Main Page</a></li>
	                                <li id="n-portal"><a 
href="http://wiki.eclipse.org/Eclipsepedia:Community_Portal">Community 
portal</a></li>
	                                <li id="n-currentevents"><a 
href="http://wiki.eclipse.org/Eclipsepedia:Current_events">Current 
events</a></li>
	                                <li id="n-recentchanges"><a 
href="http://wiki.eclipse.org/Special:Recentchanges">Recent changes</a></li>
	                                <li id="n-randompage"><a 
href="http://wiki.eclipse.org/Special:Random">Random page</a></li>
	                                <li id="n-help"><a 
href="http://wiki.eclipse.org/Help:Contents">Help</a></li>
		  <li class="separator"><a class="separator">Toolbox &nbsp;&nbsp;</a></li>

				<li id="t-whatlinkshere"><a 
href="http://wiki.eclipse.org/Special:Whatlinkshere/GMF_Newsgroup_Q_and_A">What
 links here</a></li>
				<li id="t-recentchangeslinked"><a 
href="http://wiki.eclipse.org/Special:Recentchangeslinked/GMF_Newsgroup_Q_and_A">Related
 changes</a></li>
                <!-- This is the toolbox section -->
<li id="t-upload"><a href="http://wiki.eclipse.org/Special:Upload">Upload
 file</a></li>
<li id="t-specialpages"><a 
href="http://wiki.eclipse.org/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a 
href="http://wiki.eclipse.org/index.php?title=GMF_Newsgroup_Q_and_A&amp;printable=yes">Printable
 version</a></li>				<li id="t-permalink"><a 
href="http://wiki.eclipse.org/index.php?title=GMF_Newsgroup_Q_and_A&amp;oldid=150907">Permanent
 link</a></li>	  </ul>
        </div>


<!-- Additions and mods for leftside nav End here -->


  <div id="column-content">
    <div id="content">
      <a name="top" id="top"></a>

              <div id="tabs">
         <ul class="primary">
                                         <li class="active"><a 
href="http://wiki.eclipse.org/GMF_Newsgroup_Q_and_A"><span class="tab">Page</span></a></li>
                                                         <li><a 
href="http://wiki.eclipse.org/index.php?title=Talk:GMF_Newsgroup_Q_and_A&amp;action=edit"><span
 class="tab">Discussion</span></a></li>
                                         <li><a 
href="http://wiki.eclipse.org/index.php?title=GMF_Newsgroup_Q_and_A&amp;action=edit"><span
 class="tab">View source</span></a></li>
                                         <li><a 
href="http://wiki.eclipse.org/index.php?title=GMF_Newsgroup_Q_and_A&amp;action=history"><span
 class="tab">History</span></a></li>
                                         <li><a 
href="http://wiki.eclipse.org/index.php?title=Special:Userlogin&amp;returnto=GMF%20Newsgroup%20Q%20and%20A"><span
 class="tab">Edit</span></a></li>
                  </ul>
        </div>


          <script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
            <h1 class="firstHeading">GMF Newsgroup Q and A</h1>
      <div id="bodyContent">
        <h3 id="siteSub">From Eclipsepedia</h3>
        <div id="contentSub"></div>
                              <div id="jump-to-nav">Jump to: <a 
href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
          <!-- start content -->
          <p>This page contains a number of useful/interesting Q&amp;As 
that are found on the newsgroup. Please add/edit/organize as needed.
</p>
<table id="toc" class="toc" summary="Contents"><tbody><tr><td><div 
id="toctitle"><h2>Contents</h2> <span class="toctoggle">[<a 
href="javascript:toggleToc()" class="internal" id="togglelink">hide</a>]</span></div>
<ul>
<li class="toclevel-1"><a 
href="#How_do_I_get_ports_to_stick_to_the_side_of_a_component.3F"><span 
class="tocnumber">1</span> <span class="toctext">How do I get ports to 
stick to the side of a component?</span></a></li>
<li class="toclevel-1"><a 
href="#How_do_I_change_the_color_of_a_line_using_an_action.3F"><span 
class="tocnumber">2</span> <span class="toctext">How do I change the 
color of a line using an action?</span></a></li>
<li class="toclevel-1"><a 
href="#How_do_I_create_a_scalable_note_figure_with_folded_corner.3F"><span
 class="tocnumber">3</span> <span class="toctext">How do I create a 
scalable note figure with folded corner?</span></a></li>
<li class="toclevel-1"><a href="#How_to_scroll_a_background_image.3F"><span
 class="tocnumber">4</span> <span class="toctext">How to scroll a 
background image?</span></a></li>
<li class="toclevel-1"><a href="#How_do_I_prevent_figure_overlap.3F"><span
 class="tocnumber">5</span> <span class="toctext">How do I prevent 
figure overlap?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_have_children_of_an_entity_removed_automatically.3F"><span
 class="tocnumber">6</span> <span class="toctext">How to have children 
of an entity removed automatically?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_change_an_attribute_of_an_object_when_clicked.3F"><span 
class="tocnumber">7</span> <span class="toctext">How to change an 
attribute of an object when clicked?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_access_attributes_of_an_object_related_to_a_node.3F"><span
 class="tocnumber">8</span> <span class="toctext">How to access 
attributes of an object related to a node?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_notify_the_diagram_when_domain_model_changes.3F"><span 
class="tocnumber">9</span> <span class="toctext">How to notify the 
diagram when domain model changes?</span></a></li>
<li class="toclevel-1"><a 
href="#Why_does_removing_a_link_from_the_diagram_not_remove_the_underlying_element.3F"><span
 class="tocnumber">10</span> <span class="toctext">Why does removing a 
link from the diagram not remove the underlying element?</span></a></li>
<li class="toclevel-1"><a 
href="#Why_does_MultiClientContext.includes.28.29_return_true_only_if_all_the_children_contexts_return_true.3F"><span
 class="tocnumber">11</span> <span class="toctext">Why does 
MultiClientContext.includes() return true only if all the children 
contexts return true?</span></a></li>
<li class="toclevel-1"><a 
href="#How_do_I_draw_an_ellipse_inside_another_ellipse.3F"><span 
class="tocnumber">12</span> <span class="toctext">How do I draw an 
ellipse inside another ellipse?</span></a></li>
<li class="toclevel-1"><a href="#How_can_I_hide_an_edge_on_a_diagram.3F"><span
 class="tocnumber">13</span> <span class="toctext">How can I hide an 
edge on a diagram?</span></a></li>
<li class="toclevel-1"><a 
href="#Is_it_possible_to_render_diagram_images_running_headless.3F"><span
 class="tocnumber">14</span> <span class="toctext">Is it possible to 
render diagram images running headless?</span></a></li>
<li class="toclevel-1"><a 
href="#How_do_I_prevent_the_destruction_of_an_element.3F"><span 
class="tocnumber">15</span> <span class="toctext">How do I prevent the 
destruction of an element?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_tell_where_I_have_a_validation_error_in_my_generator_model.3F"><span
 class="tocnumber">16</span> <span class="toctext">How can I tell where I
 have a validation error in my generator model?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_create_required_elements_on_diagram_when_created.3F"><span
 class="tocnumber">17</span> <span class="toctext">How to create 
required elements on diagram when created?</span></a></li>
<li class="toclevel-1"><a href="#How_do_I_set_a_ConnectionRouter.3F"><span
 class="tocnumber">18</span> <span class="toctext">How do I set a 
ConnectionRouter?</span></a></li>
<li class="toclevel-1"><a 
href="#Is_Affixed_Parent_Side_only_respected_on_creation.3F"><span 
class="tocnumber">19</span> <span class="toctext">Is Affixed Parent Side
 only respected on creation?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_show.2Fhide_compartment_contents_programmatically.3F"><span
 class="tocnumber">20</span> <span class="toctext">How can I show/hide 
compartment contents programmatically?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_change_the_view_of_an_existing_element.3F"><span 
class="tocnumber">21</span> <span class="toctext">How to change the view
 of an existing element?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_add_a_tooltip_to_a_diagram_element.3F"><span 
class="tocnumber">22</span> <span class="toctext">How can I add a 
tooltip to a diagram element?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_enable_drag-n-drop_from_the_palette.3F"><span 
class="tocnumber">23</span> <span class="toctext">How to enable 
drag-n-drop from the palette?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_remove_the_connection_handles_from_my_diagram.3F"><span
 class="tocnumber">24</span> <span class="toctext">How can I remove the 
connection handles from my diagram?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_modify_what_is_provided_in_the_model_assistance_popups.3F"><span
 class="tocnumber">25</span> <span class="toctext">How can I modify what
 is provided in the model assistance popups?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_remove_model_assistant_popups_entirely.3F"><span 
class="tocnumber">26</span> <span class="toctext">How can I remove model
 assistant popups entirely?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_allow_for_the_rearrangement_of_items_in_a_compartment.3F"><span
 class="tocnumber">27</span> <span class="toctext">How can I allow for 
the rearrangement of items in a compartment?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_make_my_domain_element_aware_of_a_view_element.27s_coordinates.3F"><span
 class="tocnumber">28</span> <span class="toctext">How can I make my 
domain element aware of a view element's coordinates?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_make_copy.2Fpaste_work_on_compartments.3F"><span 
class="tocnumber">29</span> <span class="toctext">How to make copy/paste
 work on compartments?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_create_two_unsynchronized_diagrams_for_one_domain_model_instance.3F"><span
 class="tocnumber">30</span> <span class="toctext">How to create two 
unsynchronized diagrams for one domain model instance?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_position_a_label_at_the_end_of_a_link.3F"><span 
class="tocnumber">31</span> <span class="toctext">How can I position a 
label at the end of a link?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_constrain_node_movement.2Fresize.3F"><span 
class="tocnumber">32</span> <span class="toctext">How can I constrain 
node movement/resize?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_create_two_different_containers_for_a_single_type_of_node.3F"><span
 class="tocnumber">33</span> <span class="toctext">How can I create two 
different containers for a single type of node?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_change_the_color_of_the_editor_canvas.3F"><span 
class="tocnumber">34</span> <span class="toctext">How to change the 
color of the editor canvas?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_create_a_gmfgraph_CustomLayout.3F"><span class="tocnumber">35</span>
 <span class="toctext">How to create a gmfgraph CustomLayout?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_open_a_dialog_for_editing_elements.3F"><span 
class="tocnumber">36</span> <span class="toctext">How to open a dialog 
for editing elements?</span></a></li>
<li class="toclevel-1"><a href="#How_to_remove_zoom_palette_tool.3F"><span
 class="tocnumber">37</span> <span class="toctext">How to remove zoom 
palette tool?</span></a></li>
<li class="toclevel-1"><a 
href="#How_to_extend_the_generated_properties_view.3F"><span 
class="tocnumber">38</span> <span class="toctext">How to extend the 
generated properties view?</span></a></li>
<li class="toclevel-1"><a href="#How_can_I_create_a_multi-line_link.3F"><span
 class="tocnumber">39</span> <span class="toctext">How can I create a 
multi-line link?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_right-justify_items_in_a_compartment.3F"><span 
class="tocnumber">40</span> <span class="toctext">How can I 
right-justify items in a compartment?</span></a></li>
<li class="toclevel-1"><a 
href="#How_do_I_install_an_EditPolicyProvider.3F"><span 
class="tocnumber">41</span> <span class="toctext">How do I install an 
EditPolicyProvider?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_make_multi-line_and_vertical_labels.3F"><span 
class="tocnumber">42</span> <span class="toctext">How can I make 
multi-line and vertical labels?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_programmatically_add_a_note_to_created_elements.3F"><span
 class="tocnumber">43</span> <span class="toctext">How can I 
programmatically add a note to created elements?</span></a></li>
<li class="toclevel-1"><a href="#How_can_I_persist_my_custom_border.3F"><span
 class="tocnumber">44</span> <span class="toctext">How can I persist my 
custom border?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_synchronize_my_custom_figures_with_the_model.3F"><span 
class="tocnumber">45</span> <span class="toctext">How can I synchronize 
my custom figures with the model?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_add_strikethrough_and_underline_features_to_the_Appearance_tab.3F"><span
 class="tocnumber">46</span> <span class="toctext">How can I add 
strikethrough and underline features to the Appearance tab?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_add_custom_commands_when_creating_a_diagram_element.3F"><span
 class="tocnumber">47</span> <span class="toctext">How can I add custom 
commands when creating a diagram element?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_change_anchor_location_and_z-order_of_connections.3F"><span
 class="tocnumber">48</span> <span class="toctext">How can I change 
anchor location and z-order of connections?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_disable_.27Delete_from_model.27_for_an_element.3F"><span
 class="tocnumber">49</span> <span class="toctext">How can I disable 
'Delete from model' for an element?</span></a></li>
<li class="toclevel-1"><a href="#How_can_I_vertically_center_a_label.3F"><span
 class="tocnumber">50</span> <span class="toctext">How can I vertically 
center a label?</span></a></li>
<li class="toclevel-1"><a 
href="#How_can_I_obtain_the_active_tool_from_the_palette.3F"><span 
class="tocnumber">51</span> <span class="toctext">How can I obtain the 
active tool from the palette?</span></a></li>
</ul>
</td></tr></tbody></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="How_do_I_get_ports_to_stick_to_the_side_of_a_component.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02022.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02022.html"
 rel="nofollow">How do I get ports to stick to the side of a component?</a></span></h4>
<ul><li><b>Q:</b> My first problem was that I couldn't find a good way 
to get the ports stick to the component since apparently GMF doesn't 
support nodes
</li></ul>
<ul><li><b>A:</b> Did you try setting affixedParentSide attribute for 
port Node in .gmfgraph model? This attribute was recently added and is 
available in 2.0 builds.
</li></ul>
<a name="How_do_I_change_the_color_of_a_line_using_an_action.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02017.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02017.html"
 rel="nofollow">How do I change the color of a line using an action?</a></span></h4>
<ul><li><b>Q:</b> I'm able to call a created Action by popup menu, but i
 want to know how to change EditPart's attributes such as colors of 
connections, for example.
</li></ul>
<p>Any hint?
</p>
<ul><li><b>A:</b> Visual attributes (like color, line width , ... ) are 
attributes of the figure, and they usually reflect styles on the 
Notation view
</li></ul>
<p>To change the line color on a view you can use the LineStyle (from 
the notation meta model). LineStyle had setLineColor method that allows 
you to change the line color.
</p><p>For examples on how to change styles check <a 
href="http://help.eclipse.org/help32/topic/org.eclipse.gmf.doc/reference/api/runtime/org/eclipse/gmf/runtime/diagram/core/commands/SetPropertyCommand.html"
 class="external text" 
title="http://help.eclipse.org/help32/topic/org.eclipse.gmf.doc/reference/api/runtime/org/eclipse/gmf/runtime/diagram/core/commands/SetPropertyCommand.html"
 rel="nofollow">SetPropertyCommand</a> and ColorPropertyContributionItem
</p><p>Here is one of the ways to do it:
</p><p>First you create a change property request like this
</p>
<pre>ChangePropertyValueRequest req = new ChangePropertyValueRequest( 
        StringStatics.BLANK,Properties.ID_LINECOLOR,
    FigureUtilities.colorToInteger(DiagramColorConstants.red));
</pre>
<p>you will notice that I'm passing the line color as the property ID, 
and Red as the value. Now, we can call get command on the edit part, 
passing it the request we just created.
</p>
<pre>final Command cmd = editPart.getCommand(req);
</pre>
<p>Then execute the returned command (should check for null before 
trying to execute) like this:
</p>
<pre>AbstractEMFOperation operation = new AbstractEMFOperation(((IGraphicalEditPart) editPart).getEditingDomain(),
	StringStatics.BLANK, null) {
	protected IStatus doExecute(IProgressMonitor monitor, IAdaptable info) throws ExecutionException {
		cmd.execute();
		return Status.OK_STATUS;
	}
};

try {
	operation.execute(new NullProgressMonitor(), null);
} catch (ExecutionException e) {
	// nothing to do here
}
</pre>
<p>This should change the line color to red.
</p>
<a name="How_do_I_create_a_scalable_note_figure_with_folded_corner.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02011.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02011.html"
 rel="nofollow">How do I create a scalable note figure with folded 
corner?</a></span></h4>
<ul><li><b>Q:</b> What's an elegant way to create a figure like the ones
 used for notes (the sheet with a dog-ear, i.e. a triangle bent down in 
the upper right)? Is there a gallery or resource that one can import for
 that? With "elegant" I also mean, that the figure should nicely resize,
 provide a reflowing label, etc. etc,
</li></ul>
<ul><li><b>A:</b> The figure used by notes is called NoteFigure it is 
public in the plugin org.eclipse.gmf.runtime.diagram.ui. You can use it 
or subclass it to do any customizations you need.
</li></ul>
<p>The way to use change the figure created by the edit part is to 
change the code in the your edit part's createFigure() method to create a
 NoteFigure or a subclass of it.
</p><p>I've tried a very simple case with the generated code where i use
 the note figure instead of the generated figure , and noticed that 
width and height works as i expect. It respect the value i pass (as long
 as I just drop the shape on the diagram surface, otherwise it will use 
the exact rectangle i draw on the diagram surface).
</p><p>This is the way I create my figure&nbsp;:
</p>
<pre>    /**
     * @generated Not
     */
    protected IFigure createNodeShape() {
        Insets insets = new Insets(getMapMode().DPtoLP(30), 
getMapMode().DPtoLP(30), getMapMode().DPtoLP(30), getMapMode().DPtoLP(45));
        primaryShape = new MyFigure(getMapMode().DPtoLP(300), 
getMapMode().DPtoLP(400), insets);
        return primaryShape;
    }
</pre>
<p>I have not tried to add labels though.
</p>
<a name="How_to_scroll_a_background_image.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02002.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02002.html"
 rel="nofollow">How to scroll a background image?</a></span></h4>
<ul><li><b>Q:</b> I have set a background image in gmf editor however i 
need to set the bounds to enable scrolling (to move through the image) 
(and not only when a figure is on it). How can i achieve this?
</li></ul>
<ul><li><b>A:</b> That depends on how you've set the diagram background;
 if you've overridden paintFigure() in diagram FreeformLayer you should 
override method that calculates freeform extent to return the image 
size. Another way is to add mouse-transparent ImageFigure to diagram 
layer; in this case freeform extent should be large enough to fit 
background and so there should be scrollers.
</li></ul>
<a name="How_do_I_prevent_figure_overlap.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02001.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg02001.html"
 rel="nofollow">How do I prevent figure overlap?</a></span></h4>
<ul><li><b>Q:</b> How can I prevent my figures in the editor to overlap?
</li></ul>
<p>i.e. when the user moves/drags them around, I want to prohibit 
positions 
when one is displayed on top of another (think of a graph editor where 
the nodes are small circles - I don't want them to overlap).
</p>
<ul><li><b>A:</b> This topic was already discussed but there are two 
possibilities: constrain node location on move (adjust location in 
SetConstraintsCommand or add vetoing command from another edit policy 
when location is bad) or do special layout after each diagram 
modification that will relocate overlapping figures. You could do the 
both to ensure that your nodes never overlap - even when location is 
altered from another editor.
</li></ul>
<a name="How_to_have_children_of_an_entity_removed_automatically.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01985.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01985.html"
 rel="nofollow">How to have children of an entity removed automatically?</a></span></h4>
<ul><li><b>Q:</b> I'm having trouble in getting the children of an 
entity be removed automatically: my purpose is to add and remove 
_transient_ children of an entity when changing an unrelated attribute, 
such as the name of the entity.
</li></ul>
<p>The solution I adopted is to modify the setName() method in the 
EMF-generated impl class, adding the proper eSet calls.
</p><p>The result is, when editing a diagram with the generated editor, 
changing the name of such an entity triggers an update in the children 
list adding figures for newly-added children, but *not removing* figures
 for the just-removed children, which have been semantically removed, 
but not graphically.
</p><p>Closing and re-opening the diagram results in the removal of the 
orphan figures.
</p>
<ul><li><b>A:</b> Generated&nbsp;???CanonicalEditPolicy is responsible 
for adding/removing visual elements on any changes in underlying domain 
model. Looks like it works incorrectly in this situation. Can you please
 debug it to find the reason (put a breakpoint into 
getSemanticChildrenList() method and see what's happening on renaming an
 entity)? 
</li></ul>
<p>As a workaround you can call&nbsp;???CanonicalEditPolicy.refresh() 
the the corresponding changes will be applied. 
</p><p>The Fact that should Delete View is overridden in some cases is 
actually done on purpose and it is not arbitrary. To explain, consider 
the case where you have a canonical container that can contains both 
canonical and non canonical views for example the diagram surface can 
display both canonical views, and Notes (keep in mind notes had no 
semantic elements, so note views will be considered orphaned). If should
 delete view returns true always, then when your container is refreshed 
it will delete all notes on it (actually it will delete any view that 
had no semantic element).
</p><p>You can always override this method and make it return true in 
your specific case, I would not recommend return true always
</p><p>for an example of a container that can contain canonical and non 
canonical views, check the circuit compartment in the GMF Logic example,
 where this compartment is canonical when is comes to LED's, but it can 
contains Notes as well.
</p>
<a name="How_to_change_an_attribute_of_an_object_when_clicked.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01942.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01942.html"
 rel="nofollow">How to change an attribute of an object when clicked?</a></span></h4>
<ul><li><b>Q:</b> I am working in the creation of a gmf editor, and I 
would like to be able to change an attribute of an object when it is 
clicked, for example the color. 
</li></ul>
<p>I have read the topics related: <a 
href="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg03725.html"
 class="external free" 
title="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg03725.html"
 rel="nofollow">http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg03725.html</a>
 <a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01089.html"
 class="external free" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01089.html"
 rel="nofollow">http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01089.html</a>
</p><p>and added a new class extending OpenEditPolicy, and also 
installed that EditPolicy in the appropiate EditPart file, but it does 
not seem to work.
</p><p>I am not sure OpenEditPolicy is the class I should extend for my 
case. I would really glad if someone could give me a hint. 
</p>
<ul><li><b>A:</b> To handle double-click you should install custom 
subclass of OpenEditPolicy for the desired editpart:
</li></ul>
<pre>protected void createDefaultEditPolicies() {
Ö
    installEditPolicy(EditPolicyRoles.OPEN_ROLE, new SubclassOfOpenEditPolicy());
}
</pre>
<p>As a result, SubclassOfOpenEditPolicy.getOpenCommand(Request request)
 will be called and corresponding command will be executed on 
double-clicking to the diagram node. Be careful ñ you should select 
whole node first (selection frame around the node should be visible) and
 only then double-click to the node. If you double-click on node without
 selection there is a big chance to hit inner compartment or label and 
then corresponding child element will be selected instead of 
Double-click command execution.
</p>
<a name="How_to_access_attributes_of_an_object_related_to_a_node.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01942.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01942.html"
 rel="nofollow">How to access attributes of an object related to a node?</a></span></h4>
<ul><li><b>Q:</b>  have already installed my custom subclass of 
OpenEditPolicy in my ObjectEditPart and I have added code to the 
function SubclassOfOpenEditPolicy.getOpenCommand(Request request) in 
this way:
</li></ul>
<pre>protected Command getOpenCommand(Request request) { 
    EditPart targetEditPart = getTargetEditPart(request); 
if (targetEditPart instanceof IGraphicalEditPart) { 
IGraphicalEditPart editPart = 
(IGraphicalEditParttargetEditPart; 

editPart.getContentPane().setBackgroundColor(ColorConstants.red); ....
</pre>
<p>So, as expected, when the node is double-clicked it turns red. My 
problem now is how to access the attributes of the object related with 
that node. 
</p>
<ul><li><b>A:</b> <pre>((View) EditPart.getModel()).getElement()</pre> 
is a correct way to access underlying domain model element.
</li></ul>
<a name="How_to_notify_the_diagram_when_domain_model_changes.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01923.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01923.html"
 rel="nofollow">How to notify the diagram when domain model changes?</a></span></h4>
<ul><li><b>Q:</b> From a property tab sheet I'm 
creating/deleting/editing some EMF elements that do not have a graphical
 representation. Once the changes are made I want to save the diagram 
but as the diagram has not been changed I am not allowed to save. You 
must make a change in the diagram to be able to save it.
</li></ul>
<p>Does anyone know how to make a notification to the diagram warning it
 that something has been changed?
</p>
<ul><li><b>A:</b> Take a look on 
generated&nbsp;???DocumentProvider.CustomModificationListener - this 
code is responsible for making editor dirty. Looks like some of the 
necessary notifications are not handled there.
</li></ul>
<p>I found the solution in reply of one of you answers: <a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00329.html"
 class="external free" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00329.html"
 rel="nofollow">http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00329.html</a>
</p>
<pre>NotificationFilter setFilter = NotificationFilter.createEventTypeFilter(Notification.SET);
NotificationFilter addFilter = NotificationFilter.createEventTypeFilter(Notification.ADD);
NotificationFilter addManyFilter = NotificationFilter.createEventTypeFilter(Notification.ADD_MANY);
NotificationFilter removeFilter = NotificationFilter.createEventTypeFilter(Notification.REMOVE);
NotificationFilter removeManyFilter = NotificationFilter.createEventTypeFilter(Notification.REMOVE_MANY);
NotificationFilter diagramResourceModifiedFilter = setFilter.or(addFilter.or(addManyFilter.or(removeFilter.or(removeManyFilter))));
</pre>
<p>So problem solved!!
</p>
<a 
name="Why_does_removing_a_link_from_the_diagram_not_remove_the_underlying_element.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01900.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01900.html"
 rel="nofollow">Why does removing a link from the diagram not remove the
 underlying element?</a></span></h4>
<ul><li><b>Q:</b> I can hit the breakpoint set in 
NotationViewDependentsAdvice. However, I was unfortunately not be able 
to hit my breakpoint set in the Advices methods in the domain model, 
specifically, I overwrite getDestroyDependentsCommand(...) method in my 
XXXEditHelper class, but I found the execution flow never reach that 
method when I delete a figure with link to other figures.
</li></ul>
<p>Consequently, the Node and Edge are removed from the view, the Object
 represented by the node is also removed from the domain model, but the 
object representend by the edge doesn't.
</p><p>Do you know where I am wrong?
</p><p>Another finding, the Edge is NOT actually removed from the view, 
it is still there, just not visible to user (since no target Node). I 
reach to this conclusion because every time after I have mannually 
removed the link object from the domain model xml file, and then I do 
some operation like arrange figures and save the diagram file, I found 
the removed link object come out like a ghost in the domain model xml 
file.
</p>
<ul><li><b>A:</b> The NotationViewDependentsAdvice, will delete the 
edges connected to the view but it will not delete the semantic element 
for the edges it is destroying; since this semantic element might be 
used but other edges. If you need to delete the semantic element when 
the edge is deleted you need to handle that in your own advice, but be 
careful since the semantic element might be used by other views.
</li></ul>
<a 
name="Why_does_MultiClientContext.includes.28.29_return_true_only_if_all_the_children_contexts_return_true.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01876.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01876.html"
 rel="nofollow">Why does MultiClientContext.includes() return true only 
if all the children contexts return true?</a></span></h4>
<ul><li><b>Q:</b> I just noticed that MultiClientContext.includes() 
returns true if ALL of the child contexts' includes() return true. Why 
is that? I'm using a single editor to edit objects from multiple 
plugins, so each plugin must have the same editing domain, which results
 in a MultiClientContext. Only one of the children will return true (as 
only one plugin is aware of the element type); there is no way that 
multiple contexts will return true, so therefore the MultiClientContext 
will never return true.
</li></ul>
<p>I was wondering about the design decision to make MultiClientContext 
return true only if all contexts return true; it seems the opposite of 
what I'm looking for&nbsp;;) but it could be my interpretation of 
contexts is incomplete or incorrect.
</p><p>I ran into this issue from lines 135 and 136 of 
SemanticEditPolicy:
</p>
<pre>IElementType elementType = ElementTypeRegistry.getInstance()
.getElementType(completedRequest.getEditHelperContext());
</pre>
<p>DefaultMetamodelType.getInstance() is being returned because only one
 client context can service the request, though the response from that 
client context is exactly what I was hoping would be returned.
</p>
<ul><li><b>A:</b> The behaviour of the MultiClientContext is based on 
the idea that it's easier to control an application's behaviour if you 
have to deliberately include element types and advice in your context 
rather than exclude them. The idea is that if an EObject is recognized 
by more than one client context, only the intersection of the advice and
 edit helpers in those contexts will be applied to the object.
</li></ul>
<p>Suppose we have applications A and B that operate on the same 
metamodel and share the same context criteria (e.g., editing domain), 
but each defines its own set of editing behaviour. If the 
MultiClientContext included advice and element types from both 
applications, it's possible (probable?) that the behaviour in one 
application will contradict the other.
</p><p>When two such applications are co-deployed, there likely needs to
 be a third party that makes sense of the integration. In your case this
 might be the plugin that defines the single editor. It could 'merge' 
the contexts together by binding each to the types and advice from the 
others. Or maybe your application would be best represented by a single 
client context described by the shared editing domain?
</p><p>Or do your different client contexts work with distinct 
metamodels in the same editing domain? If so you could restrict the 
criteria for each context to reflect this.
</p><p>Another option is to specify the client context on your requests 
(IEditCommandRequest#setClientContext), so that there is no question 
which element types and advice should be used to perform the semantic 
editing. But that requires customizing tools, etc, to set the 
appropriate client context.
</p><p>Maybe it would be nice to have an easy way for an 'integrator' 
(like your plugin that defines the single editor) to merge contexts? Any
 suggestions you have to make the API easier to work with would be most 
welcome.
</p>
<a name="How_do_I_draw_an_ellipse_inside_another_ellipse.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01872.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01872.html"
 rel="nofollow">How do I draw an ellipse inside another ellipse?</a></span></h4>
<ul><li><b>Q:</b> I'd like to have an Final Activity Figure in my Figure
 Gallery where a filled ellipse is surrounded by another one that is not
 filled. I tried to add one ellipse as Child to the other one, but it 
doesn't work
</li></ul>
<ul><li><b>A:</b> here is an example on how to achieve what you want 
without creating extra figure:
</li></ul>
<pre>package root.diagram.edit.parts;

import org.eclipse.draw2d.Ellipse;
import org.eclipse.draw2d.Graphics;
import org.eclipse.draw2d.geometry.Rectangle;
import org.eclipse.swt.graphics.Color;

public class MyFigure extends Ellipse {

    /**
     * Fills the ellipse.
     * @see org.eclipse.draw2d.Shape#fillShape(org.eclipse.draw2d.Graphics)
     */
    protected void fillShape(Graphics graphics) {
        graphics.pushState();
        graphics.setBackgroundColor(new Color(null,255,255,255));
        graphics.fillOval(getBounds());
        graphics.popState();
    }

    public void paintFigure(Graphics graphics) {
        super.paintFigure(graphics);
        graphics.pushState();
        graphics.setBackgroundColor(new Color(null,0,0,0));
        double scaleFactor = 0.8;
        Rectangle rect1 = getBounds().getCopy();
        Rectangle rect = getBounds().getCopy().scale(scaleFactor);
        rect.x = rect1.x + (int)Math.floor(rect1.width*(1-scaleFactor)/2);
        rect.y = rect1.y + (int)Math.floor(rect1.height*(1-scaleFactor)/2);
        graphics.fillOval(rect);
        graphics.popState();
    }
}
</pre>
<p>If you use this figure instead of the Ellipse figure in your edit 
part, it should work. Without wasting an object (the extra figure)that 
basically does nothing but draw the inner ellipse
</p>
<a name="How_can_I_hide_an_edge_on_a_diagram.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01828.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01828.html"
 rel="nofollow">How can I hide an edge on a diagram?</a></span></h4>
<ul><li><b>Q:</b> I've added an action to the diagram content navigator,
 wich allows me to select model elements and to show/hide them in the 
diagram (corresponding edges should be hidden too).
</li></ul>
<p>This works well for nodes. But the behavior of edges seems strange to
 me:
</p><p>1. Hiding a node results in hiding all target egdes. But only one
 source egde gets hidden (while all edges have visible="false").
</p><p>2. Setting the visibility of a hidden node back to true results 
in edges appearing in the upper left corner, not connected to any nodes 
(visually).
</p><p>Everything is fine, when I reopen the diagram. Any ideas where 
the mistake is?
</p><p>Following code is executed:
</p>
<pre>protected CommandResult doExecuteWithResult(
    IProgressMonitor progressMonitor, IAdaptable info)
        throws ExecutionException {

    boolean visible =&nbsp;!this.selectedView.isVisible();
    List sources = this.selectedView.getSourceEdges();
    List targets = this.selectedView.getTargetEdges();
    for (Object o&nbsp;: sources)
    {
        ((Edge)o).setVisible(visible);
    }
    for (Object o&nbsp;: targets)
    {
        ((Edge)o).setVisible(visible);
    }
    this.selectedView.setVisible(visible);
    return CommandResult.newOKCommandResult();
}
</pre>
<ul><li><b>A:</b> Setting the view visibility to false will result in 
the removal of the view's edit part from the diagram.
</li></ul>
<p>As a result all connected edges to this view should disappear from 
the diagram surface regardless of their visibility status, otherwise 
these edges will be pointing to/from nowhere and might show up in the 
upper left corner.
</p><p>To achieve this, refresh had to be called on any edit part 
connected to the edit part being removed.
</p><p>Shape compartments do this by using a ConnectionRefreshMgr take a
 look at ShapeCompartmentEditPart#ConnectionRefreshMgr
</p><p>I'm guessing that in your case the views are direct children of 
the diagram, not inside a shape compartment.
</p><p>What i suggest is, just set your nodes visibility to false no 
need to change the visibility in the edges for now. Place a break point 
in refresh method in AbstractGraphicalEditPart, make sure it get called 
on any edit parts that is connected to the edit part being removed.
</p><p>for example&nbsp;: if your diagram looks like this
</p>
<pre>    A --&gt; B
    |---&gt; C
    |&lt;--- D
</pre>
<p>Setting the visibility on A to false&nbsp;; should result in 
refreshing B,C and D
</p><p>If this is not the case; then this is a bug in GMF runtime
</p>
<a name="Is_it_possible_to_render_diagram_images_running_headless.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01826.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01826.html"
 rel="nofollow">Is it possible to render diagram images running 
headless?</a></span></h4>
<ul><li><b>Q:</b> Assume we are given a model instance file and a 
corressponding notation file. Is there a change to produce an image of 
the given instance using the GMF API without launching the Eclipse UI?
</li></ul>
<ul><li><b>A:</b> You can produce an image without bringing up an editor
 within Eclipse if this is any help.
</li></ul>
<p>See OffscreenEditPartFactory and CopyToImageUtil for details.
</p><p>When the Diagram UI plugin starts up it initializes the 
preference store with font values. It is calling 
JFaceResources.getDefaultFont() and when a new font registry is created 
in SWT it requires a Display.
</p><p>We have not supported this use case in the past, but I don't see 
why we shouldn't be able to support it assuming SWT supports this 
somehow. Maybe there is another way we can get the default font. I would
 suggest you create a <a 
href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=163380" 
class="external text" 
title="https://bugs.eclipse.org/bugs/show_bug.cgi?id=163380" 
rel="nofollow">bugzilla</a> and someone can look into it.
</p>
<a name="How_do_I_prevent_the_destruction_of_an_element.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg04214.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg04214.html"
 rel="nofollow">How do I prevent the destruction of an element?</a></span></h4>
<ul><li><b>Q:</b> I have a problem with the DestroyElementRequest. I  
want to check some condition just before deleting an element from 
diagram so that DestroyElementCommand may be not executed. I use 
approveRequest() in FlowEditHelperAdvice (Flow is the diagram name):
</li></ul>
<pre>@Override
     public boolean approveRequest(IEditCommandRequest request) {
           if (request instanceof DestroyElementRequest) {
                if.....return true;
                else return false;
}
return true;
}
</pre>
<p>Unfortunately this method will be called with DestroyElementRequest 
even if no elements were deleted. How can I solve this problem?
</p>
<ul><li><b>A:</b> I'm not sure that I understand what you are trying to 
do.
</li></ul>
<p>The #approveRequest() method can be used to indicate that your system
 
does not provide a command to delete the semantic element, as it has 
been requested.  No elements will be deleted unless an executable 
command is returned by the system. By implementing #approveRequest() to 
return false, you make it so that no elements will be deleted as a 
result of the request.
</p><p>If you want to wait to do this check until the command to delete 
the 
element (and its dependents) is actually being executed, then you can 
implement #getBeforeDestroyElementCommand() instead and return a command
 
whose #doExecuteWithResult() method will cancel the progress monitor. 
This will cause the destroy command to stop executing and to rollback 
any changes it has made up to that point.
</p>
<a 
name="How_can_I_tell_where_I_have_a_validation_error_in_my_generator_model.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01808.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01808.html"
 rel="nofollow">How can I tell where I have a validation error in my 
generator model?</a></span></h4>
<ul><li><b>Q:</b> When the validation fails (as part of the .gmfgen 
generation), ones currently has to to do a lengthy manual tree search 
like procedure to figure out, where and which element one has got wrong.
 It would be cute, if the validation would automatically directly 
anotate or "decorate" any offending line in the treeview so that one 
would be aware that something's fishy right away.
</li></ul>
<ul><li><b>A:</b> If validation fails (as part of the .gmfgen 
generation) you can execute GMFGen Editor/Validate or GMFMap 
Editor/Validate action. Both produce validation markers in the 'Problems
 View' which allow to navigate to the affected elements in the model 
tree view.
</li></ul>
<a name="How_to_create_required_elements_on_diagram_when_created.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01745.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01745.html"
 rel="nofollow">How to create required elements on diagram when created?</a></span></h4>
<ul><li><b>Q:</b> For my application I would like to have the graphical 
editor come up with two predefined containers (I fancy two large labeled
 rectangles) inside which the user then starts creating sub-elements and
 connecting them, etc.
</li></ul>
<p>This corresponds to two top-level elements that *always* have to be 
present in the XML files that I am dealing with. I don't want to have to
 create these outermost elements, they simply should be there right from
 the begin (i.e. even if creating an new "empty" file or model).
</p><p>Can one create such fixed and predefined figures? How?
</p>
<ul><li><b>A:</b> You may remove tool references for this "fixed" 
mappings in the Map model, 
</li></ul>
<p>effectively removing creation tools for them.
Then write custom code that creates this 2 fixed elements in the 
generated 
&lt;Model&gt;DiagramEditorUtil#createInitialModel(), something like
</p>
<pre>/**
* Create a new instance of domain element associated with canvas.
* @generated NOT
*/
private static org.eclipse.uml2.uml.Package createInitialModel() {
org.eclipse.uml2.uml.Package root = UMLFactory.eINSTANCE.createModel();
root.setName("Model");
createDefaultPrimitiveTypeImports(root);
return root;
}
</pre>
<a name="How_do_I_set_a_ConnectionRouter.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01732.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01732.html"
 rel="nofollow">How do I set a ConnectionRouter?</a></span></h4>
<ul><li><b>Q:</b> I would like to use ManhattanConnectionRouter in my 
application. I try to set the ConnectionRouter in my Top Editpart but 
failed. It seems that the way in traditional GEF application do not 
work. I wonder in which way I could customize the router? 
</li></ul>
<ul><li><b>A:</b> I do it in the view factory corresponding to the 
connection:
</li></ul>
<pre>public class ConnectionViewFactory extends
        org.eclipse.gmf.runtime.diagram.ui.view.factories.ConnectionViewFactory {

    protected List createStyles(View view) {
        List styles = new ArrayList();
        styles.add(NotationFactory.eINSTANCE.createRoutingStyle());
        styles.add(NotationFactory.eINSTANCE.createLineStyle());
        styles.add(NotationFactory.eINSTANCE.createFillStyle());
        return styles;
    }

    protected void decorateView(View containerView, View view,
            IAdaptable semanticAdapter, String semanticHint, int index,
            boolean persisted) {
        if (semanticHint == null) {
            semanticHint = Bluenose2VisualIDRegistry
                    .CONNECTION_VISUAL_ID;
            view.setType(semanticHint);
        }

        super.decorateView(containerView, view, semanticAdapter, semanticHint,
                index, persisted);

        RoutingStyle rstyle = (RoutingStyle) view.getStyle(NotationPackage.eINSTANCE.getRoutingStyle());
        rstyle.setAvoidObstructions(true);
rstyle.setRouting(Routing.MANUAL_LITERAL);

}

}
</pre>
<a name="Is_Affixed_Parent_Side_only_respected_on_creation.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01707.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01707.html"
 rel="nofollow">Is Affixed Parent Side only respected on creation?</a></span></h4>
<ul><li><b>Q:</b> The constraint seems to be checked only at the element
 creation. For example, I have configured my graphical defintion with 
the property set as "WEST" to only attach objects on the left of the 
container node. Then, in my generated editor, when I create a child 
element, this work well, the element is attached to the left border of 
its container. But when I try to move it, I can also attach it to the 
right border. I would have expected to "only" enable attachment to the 
left border as this was done at the creation.
</li></ul>
<ul><li><b>A:</b> The runtime actually uses the affixed side as a hint 
only, and does not 
</li></ul>
<p>prevents manual relocation. You need to install custom implementation
 of 
org.eclipse.gmf.runtime.diagram.ui.figures.IBorderItemLocator that 
prevents 
this.
</p>
<a name="How_can_I_show.2Fhide_compartment_contents_programmatically.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01704.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01704.html"
 rel="nofollow">How can I show/hide compartment contents 
programmatically?</a></span></h4>
<ul><li><b>Q:</b> I need to show and hide compartment view dynamically. 
I'm developing a Use Case Diagram Editor. When I create a extend 
relationship between 2 usecases, I would to create show the compartment 
</li></ul>
<p>view containing the extension points.
</p><p>How can I show or hide the compartment view at the creation of a 
extension point?
</p>
<ul><li><b>A:</b> Looking for this in ResizableCompartmentEditPart:
</li></ul>
<pre>protected void handleNotificationEvent(Notification event ) {
        Object feature = event.getFeature();
        if (NotationPackage.eINSTANCE.getRatio_Value().equals(feature) 
            || event.getOldValue()instanceof Ratio
            || event.getNewValue() instanceof Ratio)
            refreshRatio();
        else if (NotationPackage.eINSTANCE.getDrawerStyle_Collapsed().equals(feature)){        
            setCollapsed(event.getNewBooleanValue(), true);
            this.getFigure().revalidate();
        } else if (NotationPackage.eINSTANCE.getTitleStyle_ShowTitle().equals(feature))
            setShowCompartmentTitle(event.getNewBooleanValue());
        else if (NotationPackage.eINSTANCE.getFontStyle_FontColor().equals(feature)){
            Integer c = (Integer) event.getNewValue();
            setFontColor(DiagramColorRegistry.getInstance().getColor(c));
        }
</pre>
<p>tells you can use an AbstractTransactionalCommand that calls 
GraphicalEditPart#setStructuralFeatureValue with the correct feature.
</p>
<a name="How_to_change_the_view_of_an_existing_element.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01691.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01691.html"
 rel="nofollow">How to change the view of an existing element?</a></span></h4>
<ul><li><b>Q:</b> Basically I want to switch between two visual styles 
of one EditPart. So, I think i will add a property to the semantic 
model, wich indicates what style the EditPart should have and add a 
logic to the EditPart's class accordingly. I don't know, if this is the 
right approach. But it seems to work.
</li></ul>
<ul><li><b>A:</b> For interested parties:
</li></ul>
<p>I'm creating a petrinet editor to become familiar with GMF. 
Transition nodes (simple rectange figures) should be able to be switched
 between vertical orientation and horizontal oriantation.
</p><p>I added the following code to 'TransitionEditPart.java':
</p>
<pre>protected void handleNotificationEvent(Notification notification) {
    Object feature = notification.getFeature();
    if (PetrinetPackage.eINSTANCE.getTransition_Vertical().equals(feature))
    {
        refreshBounds();
    }
    else
        super.handleNotificationEvent(notification);
}

protected void refreshBounds() {

    Dimension size = getPrimaryShapeDimension();
    int x = ((Integer)
getStructuralFeatureValue(NotationPackage.eINSTANCE.getLocation_X())).intValue();
    int y = ((Integer) 
getStructuralFeatureValue(NotationPackage.eINSTANCE.getLocation_Y())).intValue();
    Point loc = new Point(x, y);
    ((GraphicalEditPart) getParent()).setLayoutConstraint(
        this,
        getFigure(),
        new Rectangle(loc, size));
    }

protected Dimension getPrimaryShapeDimension() {
    Transition t = (Transition) this.resolveSemanticElement();
    if (t.isVertical())
        return new Dimension(40, 10);
    else
        return new Dimension(10, 40);
    }
</pre>
<p>Another possibility could be to register two different mappings and 
differentiate between them using MappingEntry.domainSpecialization 
constraint. An example of this approach can be found in the MindMap 
project used in tutorial (three different link mappings are used for the
 domain element Relationship).
</p><p>The advantages of having two distinct elements are the following:
1. You may associate completely unrelated figures with these two 
elements 
(this may not bee needed in your scenario, although you might use 
figures 
with fixed sizes 10x40 and 40x10, respectively);
2. You might associate different creation tools with these elements (but
 
still have one creation tool if you don't need two);
3. You might associate element initializers with these elements, so as 
to 
initialize your orientation based on the element you are creating.
4. This approach can be easily adapted to the situation when the visual 
aspects of an element depend on multiple features, all you need is to 
modify 
the OCL expression in the *.gmfmap.
</p><p>Disadvantages are:
1. You have more code generated. This may be a problem as the number of 
@generated NOT's increases;
2. If the visual aspects depend solely on a single attribute of the 
semantic 
element, OCL may seem an overkill;
3. There is a known problem in the generated diagram editor that a 
XXXCanonicalEditPpolicy might fail to always update the ElementType on a
 
change in the domain model that affects the element type. (this problem 
is 
not present in the lite runtime, where ANY such change is guaranteed to 
be 
processed correctly).
</p><p>Having two different mappings was my very first approach. It 
seems to be the most logic way, having two independent visual elements, 
which can be associated to an element. But I just can't see how to 
change the visual component of an existing element (in a way different 
to how I mentioned before). 
</p><p>In fact, this should be automatic (provided that the node is 
canonical). The fact that it does not update is due to <a 
href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=150257" 
class="external text" 
title="https://bugs.eclipse.org/bugs/show_bug.cgi?id=150257" 
rel="nofollow">150257</a>.
</p>
<a name="How_can_I_add_a_tooltip_to_a_diagram_element.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01590.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01590.html"
 rel="nofollow">How can I add a tooltip to a diagram element?</a></span></h4>
<ul><li><b>Q:</b> Anyone konw how to add tooltip for element on the 
diagram?
</li></ul>
<ul><li><b>A:</b> There are no tooltip support in the gnfgraph model.
</li></ul>
<p>You may try to to add something like the code below to the generated 
&lt;DiagramElement&gt;EditPart.
</p>
<pre>/**
* @generated NOT
*/
protected IFigure createFigure() {
IFigure result = super.createFigure();
result.setToolTip(new Label("My diagram tooltip"));
return result;
}
</pre>
<a name="How_to_enable_drag-n-drop_from_the_palette.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01537.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01537.html"
 rel="nofollow">How to enable drag-n-drop from the palette?</a></span></h4>
<ul><li><b>Q:</b> It seems that the only way to create nodes using the 
palette is by first clicking on the tool from the palette, releasing the
 button, then moving the mouse to the creation point on the canvas (a 
"+" sign is displayed with the mouse cursor) then clicking again to 
actually create a new node.
</li></ul>
<p>I have a user request for "traditional" drag&amp;drop where you would
 left-click on a palette tool, move the mouse to the drop point (keeping
 the mouse button pressed) and release the mouse button in order to 
create the node.
</p><p>I've found two bug reports that claim that drag&amp;drop is 
available (resolved/fixed):
</p><p><a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=113580" 
class="external text" 
title="https://bugs.eclipse.org/bugs/show_bug.cgi?id=113580" 
rel="nofollow">Can not add elements to diagram doing drag and drop from 
palette</a>
</p><p><a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=114224" 
class="external text" 
title="https://bugs.eclipse.org/bugs/show_bug.cgi?id=114224" 
rel="nofollow">Support drag-n-drop</a>
</p><p>Is this possible in GMF 1.0.1? Is this a behavior inherited from 
GEF that can't be changed?
</p>
<ul><li><b>A:</b> This works in the GMF Geoshapes Example, but not in 
the generated Taipan Example so it looks like the GMF generation 
capabilities does not support this yet. Take a look at 
PaletteToolTransferDropTargetListener to see how this is implemented in 
the GMF Runtime.
</li></ul>
<ul><li><b>A:</b> What worked for us --- The .gmfgen (Generate Diagram 
Code) option generates a &lt;modelName&gt;PaletteFactory.java file.  
Each tool item of the palette has an internal class -- in our case, we 
had a class called <i>NodeToolEntry</i> which extended <i>ToolEntry</i>.
</li></ul>
<p>The palette tools need to extend <i>PaletteToolEntry</i> in order for
 the DND operation from the palette to work.  This was a simple change, 
(Don't forget to mark the @generated tag to NOT)
The only other change need was in the constructor, the super() method 
parameters are different for a <i>PaletteToolEntry</i>, so we replaced:
</p>
<div dir="ltr" style="text-align: left;"><pre class="source-java"><span class="kw1">super</span><span class="br0">(</span>title, description, <span class="kw2">null</span>, <span class="kw2">null</span><span class="br0">)</span>;</pre></div>
<p>with:
</p>
<div dir="ltr" style="text-align: left;"><pre class="source-java"><span class="kw1">super</span><span class="br0">(</span><span class="kw2">null</span>, title, <span class="kw2">null</span><span class="br0">)</span>;
<span class="kw1">this</span>.<span class="me1">setDescription</span><span class="br0">(</span>description<span class="br0">)</span>;</pre></div>
<p>and again, annotate the constructor as NOT generated.
</p>
<a name="How_can_I_remove_the_connection_handles_from_my_diagram.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01491.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01491.html"
 rel="nofollow">How can I remove the connection handles from my diagram?</a></span></h4>
<ul><li><b>Q:</b> Is there a way to disable the connection handles for a
 single object or for the entire editor? I'm trying to create a VE-like 
dialog editor that doesn't work with connections, so I don't really need
 this tool.
</li></ul>
<ul><li><b>A:</b> It's ConnectionHandleEditPolicy that adds these 
handles. You'll need to remove edit policy registered for 
EditPolicyRoles.CONNECTION_HANDLES_ROLE (which is added in 
ShapeNodeEditPart, default edit part for all generated nodes). Either 
add <code>removeEditPolicy(EditPolicyRoles.CONNECTION_HANDLES_ROLE);</code>
 to your EditParts <code>createDefaultEditPolicies()</code> or use a 
dynamic template if you don't want to change all of your EditParts 
manually.
</li></ul>
<a 
name="How_can_I_modify_what_is_provided_in_the_model_assistance_popups.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01450.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01450.html"
 rel="nofollow">How can I modify what is provided in the model 
assistance popups?</a></span></h4>
<ul><li><b>Q:</b> Using the help guide, I've been able to figure out how
 to add tools to the palette. I haven't been able to figure out, 
however, how to change the behavior for when you hover over the 
document. Right now, one of my model objects shows up twice in the menu-
 I see "Add Node", "Add Link", and then "Add Node" again. I don't want 
to see "Add Link" at all (it's a connection), and I only want to see 
"Add Node" once. I started with the gmfgen file, but I need to work with
 and make changes directly to the generated code, so I'm trying to 
figure out how to modify the code/plugin.xml directly.
</li></ul>
<ul><li><b>A:</b> Check subclasses of ModelingAssistantProvider.
</li></ul>
<p>The default behavior of the PopupBarEditPolicy installed on the 
diagram will get the popupbar items based on the items on the last 
active drawer in the palette. Put a breakpoint in 
DiagramPopupBarEditPolicy.fillPopupBarDescriptors() to understand what 
is going on.
</p><p>The default behavior of the PopupBarEditPolicy installed on other
 editparts, is to get the list of types for the popupbar from the 
Modeling Assistant Service. Check out the method getTypesForPopupBar().
</p>
<a name="How_can_I_remove_model_assistant_popups_entirely.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01426.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01426.html"
 rel="nofollow">How can I remove model assistant popups entirely?</a></span></h4>
<ul><li><b>Q:</b> GMF automatically creates a palette of icons when you 
hover the mouse in an editor window--the palette of things that can be 
inserted into the current object. My boss does not like the look of it; 
is there any simple way to turn it off?
</li></ul>
<ul><li><b>A:</b> Remove edit policy with key 
EditPolicyRoles.POPUPBAR_ROLE from all node and compartment edit parts. 
Or PopupBarEditPolicy if it's registered by other key.
</li></ul>
<p>You could also easily control this with a preference option if you 
wanted. Support for this is already in GMF. The GMF Logic Diagram 
Example has this in its preference pages.
</p>
<a 
name="How_can_I_allow_for_the_rearrangement_of_items_in_a_compartment.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01326.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01326.html"
 rel="nofollow">How can I allow for the rearrangement of items in a 
compartment?</a></span></h4>
<ul><li><b>Q:</b> How do I manage to rearrange items in a Compartment? 
For instance, in the Mindmap tutorial example, it is easy to create a 
Thread with a bunch of Thread Items, but suppose after I create the 
Thread Items I want to rearrange them. Is there any way to make a (user 
interface) control to do that? I can't seem to figure it out.
</li></ul>
<ul><li><b>A:</b> This has to do with the layout edit policy installed 
on your compartment edit part. Here's a configuration that works for me.
 The ShapeCompartmentEditPart installs an XYLayoutEditPolicy that allows
 you to rearrange things in your compartment.
</li></ul>
<p>You can ignore the last two other edit policy installed on this edit 
part:
</p>
<pre>public class BlockChildrenCompartmentEditPart extends ShapeCompartmentEditPart {

    public BlockChildrenCompartmentEditPart(View view) {
        super(view);
    }

    public String getCompartmentName() {
        return "BlockChildrenCompartment";
    }

    public IFigure createFigure() {
        ResizableCompartmentFigure result = (ResizableCompartmentFigure) super
                .createFigure();
        result.setTitleVisibility(false);
        return result;
    }

    protected void createDefaultEditPolicies() {
        super.createDefaultEditPolicies();
        installEditPolicy(EditPolicyRoles.CREATION_ROLE,
                new CreationEditPolicy());
        installEditPolicy(EditPolicyRoles.DRAG_DROP_ROLE,
                new DragDropEditPolicy());
        installEditPolicy(EditPolicyRoles.CANONICAL_ROLE,
                new BlockCanonicalEditPolicy());
        installEditPolicy(EditPolicyRoles.SEMANTIC_ROLE,
                new BlockChildrenCompartmentCreationEditPolicy());
}
...

}
</pre>
<p>The edit parts contained in this compartment extend 
ShapeNodeEditPart.
</p>
<a 
name="How_can_I_make_my_domain_element_aware_of_a_view_element.27s_coordinates.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01303.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01303.html"
 rel="nofollow">How can I make my domain element aware of a view 
element's coordinates?</a></span></h4>
<ul><li><b>Q:</b> I have a figure (Field) in a compartment, when the 
user set its position, it gets x and y values in the view. So i want 
that the corresponding object in the model (also Field&nbsp;:) ) get its
 values for x and y from the view coordinates. Must I implement a 
move-listener for the figure?
</li></ul>
<ul><li><b>A:</b> Do you have your own editpart for this model element? 
Why don't you just listen to changes to the location in the view and 
then update your element? Check out 
ShapeEditPart.handleNotificationEvent().
</li></ul>
<p>Here you have a snippet of my code...
</p><p>This is the method from my 
&lt;DomainModel-Name&gt;.diagram.edit.parts.FieldEditPart
</p>
<pre>/**
* @generated not
*/
protected void handleNotificationEvent(Notification arg0) {
  // SET was the type i need
  if (arg0.getEventType() == Notification.SET) {
    // the notifier sends his new Bounds ...
    if (arg0.getNotifier() instanceof BoundsImpl) {
      BoundsImpl notifier = (BoundsImpl) arg0.getNotifier();
      // for my special coordinate mapping i also need the node,
      // so i save it in this variable ...
      NodeImpl node = (NodeImpl) this.getModel();
      // get the corresponding FieldLabel Object from the model
      FieldLabel model = (FieldLabel) node.getElement();

      if (arg0.getFeature() instanceof EAttributeImpl) {
        // Get the attribute that has changed
        EAttributeImpl attribute = (EAttributeImpl) arg0.getFeature();
        // set the values for x and y in the model
        if (attribute.getName().equals("x")) {
          model.setX(notifier.getX());
        } else if (attribute.getName().equals("y")) {
          model.setY(notifier.getY());
        }
      }
    }
  }
}
</pre>
<p>So everytime the bounds change the information is stored in the 
model. If the user moves the FieldFigure or if the values are changed in
 the editor doesn't matter.
</p>
<a name="How_to_make_copy.2Fpaste_work_on_compartments.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01281.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01281.html"
 rel="nofollow">How to make copy/paste work on compartments?</a></span></h4>
<ul><li><b>Q:</b> I've managed to get pasting into compartments to work.
 The main issue I had was that copy &amp; paste worked just with the top
 level diagram.
</li></ul>
<ul><li><b>A:</b> In summary, the gmf copy &amp; paste implementation 
can be easily modified to work with compartments but for some reason it 
doesn't allow it.
</li></ul>
<p>Hope this helps other folks.
</p><p>The following in the NotationClipboardOperationHelper class have 
to be overridden (fork the class because some methods are private):
</p>
<pre>static EObject getSemanticPasteTarget(View view) {
        Diagram diagram = getContainingDiagram(view);
        if (diagram&nbsp;!= null) {
            return diagram.getElement();
        }
        return null;
    }
</pre>
<p>should become smth like
</p>
<pre>static EObject getSemanticPasteTarget(View view) {

View parent = (View) view.eContainer();

return parent.getElement();

}
</pre>
<p>and 
</p>
<pre>private boolean shouldAllowPaste(
            PasteChildOperation overriddenChildPasteOperation) {
        EObject eObject = overriddenChildPasteOperation.getEObject();
        EObject parentEObject = overriddenChildPasteOperation
            .getParentEObject();
        if ((parentEObject instanceof Diagram) &amp;&amp; (eObject instanceof View)) {

....
}
</pre>
<p>should be modified to allow pasting into Nodes, too.
</p>
<a 
name="How_to_create_two_unsynchronized_diagrams_for_one_domain_model_instance.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01250.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01250.html"
 rel="nofollow">How to create two unsynchronized diagrams for one domain
 model instance?</a></span></h4>
<ul><li><b>Q:</b> I have created a model and a diagram editors in GMF, 
let's say MyEditor. MyEditor works well with one diagram per model. But 
when I initialize a second diagram from the same model and delete or add
 something there, it gets reflected in the first diagram and also in the
 model itself. Is it possible to create two diagrams of the same type 
for one model and have instances in the model and only references in the
 diagrams, so that when I delete a node in one diagram, it stays both in
 the model and the other diagram? I want the model to be union of all 
diagrams.
</li></ul>
<p>Said in simple words I want something like the repository-based UML 
tools - have one repository and many class diagrams to it. The 
repository is the union of all diagrams.
</p><p>Is there a native support in GMF for this, or I should create my 
own implementation? If so, can you advise me where to start from?
</p>
<ul><li><b>A:</b> Try making your diagram non-synchronized (see: <a 
href="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Diagram_group"
 class="external text" 
title="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Diagram_group"
 rel="nofollow">Synchronized</a>).
</li></ul>
<a name="How_can_I_position_a_label_at_the_end_of_a_link.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01205.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01205.html"
 rel="nofollow">How can I position a label at the end of a link?</a></span></h4>
<ul><li><b>Q:</b> I want to add a Label at the end of a (decorated) 
connection which should represent the target (source) cardinality of the
 connection. What could i add to my PolyLine Connection in my .gmfgraph 
file?
</li></ul>
<p>One thing i tried was a BorderLayout as child from the Connection and
 a FigureRef also as child. Then the FigureRef gets the BorderLayoutData
 (END). But this didn't work out. Is there a build in possibility to 
solve this? Or must i implement an own Layout?  
</p>
<ul><li><b>A:</b> In gmfgraph model add AlignmentFacet to the 
DiagramLabel. In this facet you may select appropriate label alignment 
relative to the link.
</li></ul>
<p>Use Label Offset Facet to adjust the position.
</p>
<a name="How_can_I_constrain_node_movement.2Fresize.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01177.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01177.html"
 rel="nofollow">How can I constrain node movement/resize?</a></span></h4>
<ul><li><b>Q:</b> What is the GMF way of constraining how/where can the 
user move(drag) / resize Figures (editParts)&nbsp;?
</li></ul>
<p>For example, I want to allow moving/resizing them, but I want to 
prevent figures to overlap.
(e.g. in GEF, what I did was to create a SetConstraintCommand, and check
 my constraints in canExecute())
</p><p>How do I achieve something similar in GMF&nbsp;?
</p>
<ul><li><b>A:</b> You could specify resize constraint in gmfgraph model 
for the node but this particular case is different; I'd suggest you to 
try 'veto approach': add edit policy that contributes command in cases 
when SetConstraintCommand is returned. In this command check that nodes 
overlap with the new bounds; if it's so return 'false' from 
canExecute().
</li></ul>
<p>If you are that pretty strict about layout constraint maybe it would 
be better to <a 
href="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Tuning_property_sheet"
 class="external text" 
title="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Tuning_property_sheet"
 rel="nofollow">hide it</a> from the properties view? And there is one 
more way to change it - modify xml with notation model externally and 
reopen the diagram.
</p>
<a 
name="How_can_I_create_two_different_containers_for_a_single_type_of_node.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01159.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01159.html"
 rel="nofollow">How can I create two different containers for a single 
type of node?</a></span></h4>
<ul><li><b>Q:</b> I am trying to be able to drag and drop various 
SubNodes (represented using 1 class in my meta-model and 1 rectangle in 
my gmfgraph) into two different containers layed out (using a 
BorderLayout) into one single SuperNode (1 class in my meta-model and 1 
rectangle with 2 internal rectangles associated to 2 containers in my 
gmfgraph).
</li></ul>
<p>The idea is to be able to have a SuperNode with various SubNodes 
placed on the left and right sides of the SuperNode.
</p><p>The problem is in the mapping!! I can't define two different 
compartment mappings using the same SubNode child; if I do so, whenever I
 drag &amp; drop a SubNode into one of the compartments, another one 
appears also in the other compartment.
</p><p>I have tried to solve this problem creating different SubNode 
Rectangles (LeftSubNode and RightSubNode) in the gmfgraph and then 
associate them to the LeftCompartment and RightCompartment, respectively
 in the gmfmap. But it doesn't work either.
</p><p>The only solution seems to be changing the meta-model to add two 
different kinds of SubNodes (LeftSubNode and RightSubNode). But I don't 
want to do that since the SubNode domain concept should be unique in the
 meta-model (there is only one kind of SubNodes, independently of the 
fact that they appear graphically on the right or on the left side of 
the SuperNode).
</p>
<ul><li><b>A:</b> Guess, there's no need to modify your domain model and
 to keep there information which compartment SubNode belongs to.
</li></ul>
<p>It's possible to define two (or more) compartments for same SubNode, 
the .gmfmap should look like:
</p>
<pre>NodeMapping SuperNode
ChildReference compartment=Left
ownedChild NodeMapping SubNode
ChildReference compartment=Right
referencedChild NodeMapping SubNode
</pre>
<p>Note use of referencedChild instead of ownedChild in the second (and 
subsequent) child references.
</p><p>With this, you get exactly one SubNode concept, and we get to 
another part of the problem, subnodes being automatically added to all 
compartments. You can approach this problem either with keeping your 
diagram not automatically synchronized (GMFGen.GenDiagram#synchronized 
attribute), which means generated code won't try to add elements 
automatically; or you can keed whole diagram synchronized and fix 
canonical edit policy of the compartments only not to process domain 
notifications (ADD/SET) and not to add children. I'd recommend the 
former approach because it rarely makes sense to have synchronized 
diagrams anyway.
</p>
<a name="How_to_change_the_color_of_the_editor_canvas.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01141.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01141.html"
 rel="nofollow">How to change the color of the editor canvas?</a></span></h4>
<ul><li><b>Q:</b> I want to change the colour of the editor canvas. Is 
there anyway by which I can do this?
</li></ul>
<ul><li><b>A:</b> Override createFigure() in your DiagramEditPart. By 
calling super.createFigure() you get a reference to the IFigure. You can
 then set the background colour directly for this figure. You also need 
to set it to be opaque.
</li></ul>
<pre>protected IFigure createFigure() {
  IFigure fig = super.createFigure();
  fig.setBackgroundColor(ColorConstants.green);
  fig.setOpaque(true);
  return fig;
}
</pre>
<a name="How_to_create_a_gmfgraph_CustomLayout.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01107.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01107.html"
 rel="nofollow">How to create a gmfgraph CustomLayout?</a></span></h4>
<ul><li><b>Q:</b> How can I create a CustomLayout? Are thery any 
tutorial, guides? Which class should I sub-class, what methods should I 
overwrite, etc.
</li></ul>
<ul><li><b>A:</b> gmfgraph.CustomLayout is just a gate to the custom 
implementation of the org.eclipse.draw2d.LayoutManager class. Thus there
 is in fact 2 questions -- how to write draw2d Layout manager and how to
 plug it into the gmfgraph.
</li></ul>
<p>I can try to answer the second one.
</p><p>Imagine you have com.xyz.SuperLayout class in the com.xyz.misc 
plugin. The SuperLayout class has method setBoolParam(boolean) and 
public instance field int myIntParam; It also expects the instanceof 
SuperLayoutData that has setter setStringParam(String s).
</p><p>To plug this into gmfgraph you need:
</p><p>1. Create separate ResourceGallery, set implementation bundle to 
"com.xyz.misc"
2. Create figures structure.
3. In the container node create CustomLayout, set fqn = 
"com.xyz.SuperLayout". Note that bundleName property of CustomLayout is 
deprecated and not used, it does not make sense to change it.
4. In the just created Custom Layout create custom attribute, set name =
 
boolParam (or BoolParam -- it doesnot make sense) -- the name is derived
 
from setter name, value = (say) "false" or "42 / 2 &gt;= 21".
5. Create one more custom attribute, name = "myIntParam" (derived from 
field 
name), value = "42", isDirectAccess = true.
6. In the child figure create CustomLayoutData, set fqn = 
"com.xyz.SuperLayutData", repeat step 4 for custom attribute 
"StringParam" 
if needed.
</p><p>Note that values set at the steps 4, 5 are considered opaque and 
just generated into the setter call or assignment statement as is. Thus,
 to set the string value "MG" for custom attribute StringParam you need 
to set value = "MG" (with quotes).
</p>
<a name="How_to_open_a_dialog_for_editing_elements.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01050.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01050.html"
 rel="nofollow">How to open a dialog for editing elements?</a></span></h4>
<ul><li><b>Q:</b> I am trying to display a dialog for editing elements. 
</li></ul>
<p>Following this <a 
href="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg03725.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.technology.gmf/msg03725.html"
 rel="nofollow">post</a> and another one that I cannot find now, it 
suggested that a dialog could be placed in the getOpenCommand() method 
and return null for the command. That works to display the dialog, but 
it does not work for edits. 
</p><p>Can anybody give me an idea of what to do differently? 
</p><p>I think I need to look at the command that is returned, but I 
have been unable to find any documentation on commands.
</p><p>I would like to be able to double click on a graphical element 
and display a dialog that the user can edit information about that 
element or the model in general. Like the properties window except in a 
dialog. 
</p><p>The following code displays the dialog, but I cannot seem to 
figure out how to update the model from here.
</p>
<pre>public class OpenEditorEditPolicy extends OpenEditPolicy {

protected Command getOpenCommand(Request request) {
EditPart targetEditPart = getTargetEditPart(request);
if (targetEditPart instanceof IGraphicalEditPart) {
IGraphicalEditPart editPart = (IGraphicalEditPart) targetEditPart;
View view = editPart.getNotationView();
if (view&nbsp;!= null) {
EObject element = ViewUtil.resolveSemanticElement(view);
if (element instanceof Operation) {
System.out.println("found operation");
Shell shell = new Shell(SWT.DIALOG_TRIM | 
SWT.PRIMARY_MODAL);
OperationComposite editor = new OperationComposite(shell, 
SWT.NONE);
shell.open();

// This makes the system unstable.
// while (!shell.isDisposed ()) {
// Display.getCurrent().sleep();
// }

return new ICommandProxy(new EditOperationCommand(element));
}
}
}
return null;
}
}
</pre>
<ul><li><b>A:</b> To learn more about commands, explore the 
IUndoableOperation type hierachy to see what type of commands GMF 
defines. Take a look at AbstractTransactionalCommand. 
</li></ul>
<p>NOTE: if you need to return these commands from an EditPolicy they 
must be wrapped by an ICommandProxy (this makes a GMF command look like a
 GEF command).
</p><p>hope this helps,
vlad
</p><p>Here are some steps you should take, substitute your concrete 
example accordingly.
</p><p>Add an editor action in your plugin.xml:
</p>
<pre>&lt;extension point="org.eclipse.ui.popupMenus"&gt;
  &lt;objectContribution
     adaptable="false"
     id="ca.uwaterloo.watform.bluenose2.diagram.ui.actions.Bluenose2GenerateVHDLAction"
     objectClass="org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart"&gt;
  &lt;action 
    label="Generate VHDL"
    class="ca.uwaterloo.watform.bluenose2.diagram.ui.actions.Bluenose2GenerateVHDLAction"
    menubarPath="additions"
    enablesFor="1"
    id="Bluenose2OpenGenerateVHDLAction"&gt;
  &lt;/action&gt;
  &lt;/objectContribution&gt; 
&lt;/extension&gt;
</pre>
<p>Define a command to edit the particular model element as follows, add
 more parameters etc.
</p>
<pre>public class GenerateVHDLCommand extends AbstractTransactionalCommand {

private EObject modelElement;

    public GenerateVHDLCommand(EObject modelElement, TransactionalEditingDomain domain,
         String label, List affectedFiles) {
        super(domain, label, affectedFiles);
        this.modelElement = modelElement;
    }

    protected CommandResult doExecuteWithResult(
            IProgressMonitor progressMonitor, IAdaptable info)
            throws ExecutionException {
        //example here        
        return CommandResult.newOKCommandResult(/*VHDLGenerator.generateVHDL( (Pipeline) modelElement)*/);
    }

}
</pre>
<p>in doExecuteWithResult you have read/write access to the model 
element so you can do whatever you want.
</p><p>Create and execute this command from your action:
</p>
<pre>public void run(IAction action) {
        TransactionalEditingDomain domain = mySelectedEditPart
                .getEditingDomain();
        EObject modelElement = mySelectedEditPart.resolveSemanticElement();

        AbstractTransactionalCommand semanticCommand = new GenerateVHDLCommand(
                modelElement, domain, "Generate VHDL Command",
                Collections.EMPTY_LIST);

        try {
            OperationHistoryFactory.getOperationHistory().execute(
                    semanticCommand, null, null);
        } catch (ExecutionException e) {
            // smth Happend here
        }

        CommandResult commandResult = semanticCommand.getCommandResult();

        if (commandResult.getStatus().isOK()) {
            String result = (String) commandResult.getReturnValue();
            System.out.println(result);
        }

}
</pre>
<a name="How_to_remove_zoom_palette_tool.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01031.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg01031.html"
 rel="nofollow">How to remove zoom palette tool?</a></span></h4>
<ul><li><b>Q:</b> I am wondering how to remove Zoom palette entry. I 
wondered, if there might be a way to remove/add some other 
standard-tools like the way the removal of Zoom worked? I tried the same
 for the Note-dropdown-Tool, but I didn't manage to remove it. Does 
anyone know the correct id for this one?
</li></ul>
<ul><li><b>A:</b> you could try the following:
</li></ul>
<pre>&lt;extension point="org.eclipse.gmf.runtime.diagram.ui.paletteProviders"&gt; 
  &lt;paletteProvider class="org.eclipse.gmf.runtime.diagram.ui.providers.DefaultPaletteProvider"&gt;
    &lt;Priority name="High"/&gt;
    &lt;contribution&gt;
      &lt;predefinedEntry
         id="standardGroup/zoomTool"
         remove="true"/&gt;
    &lt;/contribution&gt;
  &lt;/paletteProvider&gt;
&lt;/extension&gt;
</pre>
<p>There's no other way than to place remove="true" xml right now, 
though we are going to have complete description of the palette tools in
 the .gmftool model some day.
</p><p>As for note tools, next should remove all note-related tools from
 the palette (put these next to zoom removal):
</p>
<pre>&lt;predefinedEntry id="standardGroup/noteStack/noteTool" remove="true"/&gt; 
&lt;predefinedEntry id="standardGroup/noteStack/textTool" remove="true"/&gt; 
&lt;predefinedEntry id="standardGroup/noteStack/noteattachmentTool" remove="true"/&gt;
</pre>
<p>Specifying remove=true in plugin.xml works but it is not perfect. The
 problem is it will interfere other GMF-based editor your product has. I
 would like to remove Zoom tool in my editor ONLY, but Zoom is also 
removed from other GMF-based editor.
</p><p>You need to provide criteria in the palette provider extension 
point to indicate that it applies to your editor only.  e.g.:
</p>
<pre>&lt;editor id="LogicEditor"&gt;
&lt;/editor&gt;
</pre>
<a name="How_to_extend_the_generated_properties_view.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00989.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00989.html"
 rel="nofollow">How to extend the generated properties view?</a></span></h4>
<ul><li><b>Q:</b> I am working on a project for modelling processes. The
 nodes have the following important attributes:
</li></ul>
<p>-associatedClass (EString)
-customProperties (EMap)
</p><p>I have two questions:
</p><p>-How can I extend/edit/overwrite/whatever the default GMF/EMF 
Property 
view? I want to select the value for associatedClass from a dropdown 
list 
(similar to EEnum).
-How can I add an additional tab in the Property view, which should be 
able to edit the customProperties attribute?
</p>
<ul><li><b>A:</b> Check out the tabbed properties view <a 
href="http://www.eclipse.org/articles/Article-Tabbed-Properties/tabbed_properties_view.html"
 class="external text" 
title="http://www.eclipse.org/articles/Article-Tabbed-Properties/tabbed_properties_view.html"
 rel="nofollow">article</a>
</li></ul>
<p>It tells you how to add tabs and sections (fields) to the tabbed 
properties view.
</p><p>I've put some details about how to deal with property sheet in 
2.0M2 <a 
href="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Tuning_property_sheet"
 class="external text" 
title="http://wiki.eclipse.org/index.php/GMF_GenModel_Hints#Tuning_property_sheet"
 rel="nofollow">here</a>.
</p>
<a name="How_can_I_create_a_multi-line_link.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00939.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00939.html"
 rel="nofollow">How can I create a multi-line link?</a></span></h4>
<ul><li><b>Q:</b> How can I draw a link in the diagram as a double line?
</li></ul>
<p>It shuold look like this:
</p><p>--- ---
| A |==============| B |
--- ---
</p>
<ul><li><b>A:</b> Write custom PolylineConnection that paints itself 
twice shifting internal PointList up and down by desired offset.
</li></ul>
<a name="How_can_I_right-justify_items_in_a_compartment.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00847.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00847.html"
 rel="nofollow">How can I right-justify items in a compartment?</a></span></h4>
<ul><li><b>Q:</b> I want to layout the objects in the compartment as a 
row right-justified. I keep getting a stack of objects on the right. 
What gives? Is this a bug?
</li></ul>
<pre>public IFigure createFigure() {
  ResizableCompartmentFigure result = (ResizableCompartmentFigure) super.createFigure();
  FlowLayout layout = new FlowLayout(true);
  layout.setMajorAlignment(FlowLayout.ALIGN_RIGHTBOTTOM);
  result.setLayoutManager(layout);
  result.setTitleVisibility(false);
  return result;
}
</pre>
<ul><li><b>A:</b> I found the answer by diving into the source code (as 
you all more learned people probably expected me to do in the first 
place).
</li></ul>
<p>A ResizableCompartmentFigure contains two children figures, a Figure 
for the text pane (optional) and the ScrollPane. The ScrollPane child 
object has a child figure itself called content. Setting the 
ResizableCompartmentFigure layout does nothing. Setting the ScrollPane 
layout does bad things (because it expects the ScrollLayout). You must 
instead set the layout of the ScrollPane child figure, as such:
</p>
<pre>public class FooBarCompartmentEditPart extends ListCompartmentEditPart {
...
/**
* @generated NOT
*/
public IFigure createFigure() {
    ResizableCompartmentFigure result = (ResizableCompartmentFigure) 
super.createFigure();
    IFigure fig = result.getContentPane();
    FlowLayout layout = new FlowLayout(true);
    layout.setMajorAlignment(FlowLayout.ALIGN_RIGHTBOTTOM);
    fig.setLayoutManager(layout);
    result.setTitleVisibility(false);
    return result;
}
</pre>
<a name="How_do_I_install_an_EditPolicyProvider.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00802.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00802.html"
 rel="nofollow">How do I install an EditPolicyProvider?</a></span></h4>
<ul><li><b>Q:</b> Is there any editpolicyprovider snippet except the one
 in GMF Developer Guide, in which I couldn't find the source of 
TraceDiagramEditPolicyProvider. In fact, I found no implementation of 
</li></ul>
<p>IEditPolicyProvider except EditPolicyService, so I wonder how to 
implement the TraceDiagramEditPolicyProvider above.
</p>
<ul><li><b>A:</b> All you need to do, is write the provides() method as 
you would in any other service, describing the type of editpart you 
provide for (or element of the editpart). Make sure you are specific 
here so as not to have your editpolicy installed on non-applicable 
editparts.
</li></ul>
<p>Then you just need to install your editpolicy on the editpart in the 
createEditPolicies() method.
</p><p>e.g. editPart.installEditPolicy(THE_ROLE, new TheEditPolicy());
</p><p>I'll add some detail, here's code for a 
PropertyHandlerEditPolicyProvider class, that installs a 
PropertyHandlerEditPolicy for the EditPolicyRoles.PROPERTY_HANDLER_ROLE 
role on edit parts of the types GateEditPart and 
AbstractVariableEditPart.
</p>
<pre>public class PropertyHandlerEditPolicyProvider implements
        IEditPolicyProvider {

public void createEditPolicies(EditPart editPart) {

editPart.installEditPolicy(EditPolicyRoles.PROPERTY_HANDLER_ROLE,
                new PropertyHandlerEditPolicy());
    }

    public boolean provides(IOperation operation) {
        if (operation instanceof CreateEditPoliciesOperation)
{
            EditPart editPart =((CreateEditPoliciesOperation)operation).getEditPart();
            if (editPart instanceof GateEditPart ||
                    editPart instanceof AbstractVariableEditPart
                    )
                return true;
        }
        return false;
    }
    public void addProviderChangeListener(IProviderChangeListener listener) {
    }
    public void removeProviderChangeListener(IProviderChangeListener listener) {
    }
}
</pre>
<p>Remember also to declare the PropertyHandlerEditPolicyProvider class 
in plugin.xml, as follows:
</p>
<pre>    &lt;editPolicyProvider
       class="no.hal.diamodl.diagram.custom.providers.PropertyHandlerEditPolicyProvider"&gt;
       &lt;Priority name="Lowest"/&gt;
       &lt;object id="GateEditPart"
          class="no.hal.diamodl.diagram.edit.parts.GateEditPart(no.hal.diamodl.gmf.diagram)"/&gt;
       &lt;object id="VariableEditPart"
          class="no.hal.diamodl.diagram.edit.abstractparts.AbstractVariableEditPart(no.hal.diamodl.gmf.diagram)"/&gt;
       &lt;context editparts="GateEditPart,VariableEditPart"/&gt;
    &lt;/editPolicyProvider&gt;
</pre>
<p>Note how the object elements declares IDs for the EditPart classes 
(the project/plugin name is within the parenthesis), and how the context
 element refers to these IDs.
</p>
<a name="How_can_I_make_multi-line_and_vertical_labels.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00617.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00617.html"
 rel="nofollow">How can I make multi-line and vertical labels?</a></span></h4>
<ul><li><b>Q:</b> How can I create a multiline/wrapped label, like the 
ones for the standard Note feature? Do I have to manipulate the code for
 this or is there a way to do this in GMF?
</li></ul>
<p>Is there a way to create vertical labels, rotated 90∞ to the left, 
with the text going upwards?
</p>
<ul><li><b>A:</b>  I'll try to answer your questions from the runtime 
point of view.
</li></ul>
<p>To make the text wrap you should use a figure that inherits WrapLable
 and make sure you call setTextWrap(true) this will give you the 
wrapping functionality; or you can just use the 
DiagramNameCompartmentEditPart which will do that for you.
</p><p>You can always implement the paintFigure method on your figure to
 do what ever you like.
</p><p>There is an option to get rotated string using 
ImageUtilities.createRotatedImageOfString(...) but it looks not very 
good if text antialiasing is enabled.
</p>
<a name="How_can_I_programmatically_add_a_note_to_created_elements.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00549.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00549.html"
 rel="nofollow">How can I programmatically add a note to created 
elements?</a></span></h4>
<ul><li><b>Q:</b> I need to create programmatically a note attachment 
when I create an 
</li></ul>
<p>element in my diagram. How can I do?
</p>
<ul><li><b>A:</b> The answer depends on where the code is called to 
create the new element in your diagram. There is an AddNoteAction in GMF
 that creates a new note and draws a note attachment to the element from
 which the action was executed. If you are doing something similar to 
this, you could probably reuse this code.
</li></ul>
<p>One idea is to override the method 
protected Command getCreateCommand(CreateViewRequest request) in
CreationEditPolicy
</p><p>This method is responsible for creating the view for the new 
element. You should compose this command with another that creates the 
views for the Note and the connection.
</p><p>To see how to create a note take a look at NoteViewFactory.
</p><p>You can figure a lot about how this is done by setting 
breakpoints in GraphicalNodeEditPolicy (gmf) while attaching notes using
 the Note Attachment tool.
</p><p>Here's an example of how to create the note when you create an 
element. Modify the CreationEditPolicy for the editPart corresponding to
 that element type.
</p><p>Maybe someone else can suggest how to add the edge.
</p>
<pre>protected Command getCreateCommand(CreateViewRequest request) {

    IElementType NOTE = ElementTypeRegistry
            .getInstance()
            .getType(
                    "org.eclipse.gmf.runtime.diagram.ui.presentation.note");

    ICommand createElementViewCommand = ((ICommandProxy) super
            .getCreateCommand(request)).getICommand();

    TransactionalEditingDomain editingDomain = ((IGraphicalEditPart) getHost())
            .getEditingDomain();

    CompositeTransactionalCommand cc = new CompositeTransactionalCommand(
            editingDomain,
            DiagramUIMessages.AddCommand_Label);

cc.compose(createElementViewCommand);

    CreateViewRequest createNoteRequest = CreateViewRequestFactory
            .getCreateShapeRequest(
                    NOTE,
                    PreferencesHint.USE_DEFAULTS);

    Iterator descriptors = createNoteRequest
            .getViewDescriptors().iterator();

    while (descriptors.hasNext()) {
        CreateViewRequest.ViewDescriptor descriptor = (CreateViewRequest.ViewDescriptor) descriptors
                .next();

        CreateCommand createCommand = new CreateCommand(
                editingDomain, descriptor,
                ((View) (getHost().getModel()))
                        .getDiagram());

        cc.compose(createCommand);
    }

return new ICommandProxy(cc.reduce());

}
</pre>
<p>The edit part corresponding to the element you need to create, must 
install your modified EditPolicy as follows:
</p>
<pre>protected void createDefaultEditPolicies() {
        installEditPolicy(EditPolicyRoles.CREATION_ROLE,
                new CreationEditPolicy() {
...
}
</pre>
<p>The anonymous class overrides protected Command 
getCreateCommand(CreateViewRequest request)
</p><p>This method is called in the super class when it creates the view
 for a newly create element.
</p>
<a name="How_can_I_persist_my_custom_border.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00432.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00432.html"
 rel="nofollow">How can I persist my custom border?</a></span></h4>
<ul><li><b>Q:</b> I created custom border following the thread "How can I
 use custom border?". My border's width, style, color can be changed 
dynamically from the appearance page. But it's not persisted. When I 
save, close and re-open the diagram - the borders are with their initial
 values. How can I persisted the values of my custom border?
</li></ul>
<ul><li><b>A:</b>  Let me explain something about persisted/transient 
views.
</li></ul>
<p>Any time you create a view you have the choice of creating this view 
as a transient or persisted view, transient views will not be saved when
 you close your model, then they will be recreated the next time you 
open your diagram. As a result transient views always use default values
 for all the attributes.
</p><p>The Diagram event broker will persist any transient view as soon 
as some one change any attribute on that view. For, example if you move 
the transient view on the diagram surface, which results in setting the 
bounds on this view, the diagram event broker will persist this view for
 you.
</p><p>I think you should add a break point to the 
DiagramEventBroker#transactionAboutToCommit near the end of this method 
you will find it creating a PersistViewsCommand, line 312 if you have 
the latest GMF 1.0.1 code, then change any attribute on your border 
using the properties view, you should hit this break point and the view 
should get persisted, otherwise this might be a bug.
</p><p>One more point to keep in mind, changing the attributes of the 
view in the View factory decorate method will not persist the view since
 it is done in a silent operation.
</p><p>You will need to introduce a new notation style, this can be done
 by adding creating your own meta model that define a new notation style
 that extends the default notation style. Then in your view factory you 
override the createStyles to do something like this:
</p>
<pre>    protected List createStyles(View view) {
        List styles = super.createStyles(view);              
        styles.add(MyFactory.eINSTANCE.createCustomStyle());
        return styles;
    }
</pre>
<p>I believe there is a tutorial on how to create custom styles, try to 
look it up.
</p>
<a name="How_can_I_synchronize_my_custom_figures_with_the_model.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00283.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00283.html"
 rel="nofollow">How can I synchronize my custom figures with the model?</a></span></h4>
<ul><li><b>Q:</b> I have been using GMF and creating custom figures, the
 custom figures are made up of images and several label which might or 
might not be shown based on some logic that needs to be applied to the 
model.
</li></ul>
<p>I am now trying to work out the cleanest way to add the 
synchronization of the model with the figure, I suppose the EditPart 
should contain the logic but what is the preferred way to override the 
default EditPart?
</p>
<ul><li><b>A:</b> You could override refreshVisuals() in generated edit 
parts to update figure on model changes.
</li></ul>
<p>Add the following code in ShipEditPart of TaiPan sample. When you 
rename a ship to "Avrora" it becomes red.
</p>
<pre>    protected void refreshVisuals() {
        super.refreshVisuals();
        Ship ship = (Ship) resolveSemanticElement();
        if ("Avrora".equals(ship.getName())) { //$NON-NLS-1$
            getPrimaryShape().setBackgroundColor(ColorConstants.red);
        } else {
            getPrimaryShape().setBackgroundColor(null);
        }
    }

    protected void handleNotificationEvent(Notification notification) {
        super.handleNotificationEvent(notification);
        if 
(TaiPanPackage.eINSTANCE.getShip_Name().equals(notification.getFeature())) {
            refreshVisuals();
        }
    }
</pre>
<a 
name="How_can_I_add_strikethrough_and_underline_features_to_the_Appearance_tab.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00204.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00204.html"
 rel="nofollow">How can I add strikethrough and underline features to 
the Appearance tab?</a></span></h4>
<ul><li><b>Q:</b> I have to add "underline" and "strikethrough" features
 in Appearance page in Properties view. Can someone give me any hints?
</li></ul>
<ul><li><b>A:</b> This is going to take some effort so I hope you're up 
for it:-)
</li></ul>
<p>The Appearance tab is contributed by the 
org.eclipse.gmf.runtime.diagram.ui.properties plug-in; the required 
three extension point declarations, and the corresponding implementation
 classes are found in this plug-in.
</p><p>This plug-in contributes three tabs; the Appearance and Advanced 
tabs are always shown when anything in the editor is selected, and 
additionally the Grid tab is shown when the canvas itself is selected. 
These contributions are fixed with no built-in capability to 'swap out' 
the appearance tab with your own or for adding additional items to the 
existing tab.
</p><p>The quick and dirty solution is to import 
org.eclipse.gmf.runtime.diagram.ui.properties into your workspace (as 
source) then clone ....appearance.ConnectionAppearancePropertySection 
and any other required classes (put the clones in your own plug-in) then
 add your own "underline" and "strikethrough" properties to your 
clone(s). 
Then in the plugin.xml of org.eclipse.gmf.runtime.diagram.ui.properties 
modify the extension point declaration(s) to point to your 'cloned' 
version(s) instead. This is not your final solution because you really 
don't want to hack Eclipse code and distribute it with your plug-in or 
application (bad Karma&nbsp;:-P). 
</p><p>What the quick and dirty solution can do is get you up and 
running pretty quickly with prototyping/developing your enhancements.
</p><p>Once you're satisfied that the enhancements are working then it's
 time to make them official.
</p><p>Making it official means stopping the hijacking of 
org.eclipse.gmf.runtime.diagram.ui.properties and properly declaring 
your own custom propertyContributor.
</p><p>There are just 3 basic steps to this process:
</p><p>1. Implement and override .getContributorId() in the generated 
&lt;your&gt;DiagramEditor by returning your own ID for the custom 
contribution. This ID is a string that you choose so it can be just 
about anything; you can simply follow any convention you have now for 
other extension point ID's in your application. As an example let's make
 the ID = "com.my.own.contributor.id"
</p><p>2. Copy/paste the following three extension point declarations 
from the 'hacked' 
org.eclipse.gmf.runtime.diagram.ui.properties#plugin.xml into your own 
plugin.xml:
</p><p>org.eclipse.ui.views.properties.tabbed.propertyContributor 
org.eclipse.ui.views.properties.tabbed.propertyTabs 
org.eclipse.ui.views.properties.tabbed.propertySections
</p><p>3. Now in your own plugin.xml replace the three:
contributorId="org.eclipse.gmf.runtime.diagram.ui.properties"
with
contributorId="com.my.own.contributor.id"
</p><p>That's about it.
</p><p>You can delete the hacked version of 
org.eclipse.gmf.runtime.diagram.ui.properties at this point since you 
don't need it any more.
</p><p>I hope this is enough of a hint on how you can get started; the 
bulk of your work (and maybe headaches:-P) is to get to know how the 
existing code utilizes the editing domain, commands, etc... and then 
adding your own stuff to it.
</p><p>Hints +1 -- If your editor has some non-standard or tricky 
hierarchy you may have to extend the default ModelElementTypeMapper or 
provide your own custom implementation of ITypeManager.
</p><p>Hint +2 -- Likewise with the LabelProvider
</p><p>Hint +3 -- If you want finer control of when these new properties
 show up (maybe they're only applicable for certain nodes???) then you 
would want to extend the default filters or provide your own 
implementation of IFilter.
</p>
<a 
name="How_can_I_add_custom_commands_when_creating_a_diagram_element.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00166.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00166.html"
 rel="nofollow">How can I add custom commands when creating a diagram 
element?</a></span></h4>
<ul><li><b>Q:</b> i have a metamodel for Petrinets which includes 
Transitions, Places and Arcs and i have a generated GMF editor for these
 Petrinets. Now what i want to do is to perform some custom commands on 
such a model (like creating additional assoziations to other models) 
when a new Transition is created.
</li></ul>
<p>As i understood i would create a specialization-type as shown in the 
attached screenshot for my Transition metamodel-type for this purpose.
</p><p>The blue marked metamodel-type is the generated Transition 
metamodel-type. The red marked parts are my own extensions to the 
generated element types and source code.
</p><p>However none of the methods 'approveRequest()' 
'configureRequest()' 'getBeforeEditCommand()' or 'getAfterEditCommand()'
 are called in my TransitionEditHelperAdvice class.
</p><p>What am i missing here?
</p>
<ul><li><b>A:</b> If you wish to modify the behaviour when a new 
Transition is created using a palette tool, you need to bind your advice
 to the Transition type itself, rather than creating a new 
specialization of the transition type. The advice associated with your 
specialization will only apply if you have a tool (or menu item) that 
creates that specialization type specifically.
</li></ul>
<p>I think all you need to do is remove your specialization type and 
replace it with something like:
</p>
<pre>&lt;adviceBinding  id="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.transitionAdvice"
typeId="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.Transition_1001"
class="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.edit.helpers.TransitionEditHelperAdvice"
inheritance="all"&gt;
&lt;/adviceBinding&gt;
</pre>
<p>My editor is working as expected now.
</p><p>In my diagram code the following metamodel type for the 
Transitions looks as follows:
</p>
<pre>&lt;metamodel 
nsURI="http://de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet"&gt;
&lt;metamodelType

id="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.Transition_1001"
name="Transition"
kind="org.eclipse.gmf.runtime.emf.type.core.IHintedType"
eclass="Transition"

edithelper="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.edit.helpers.TransitionEditHelper"&gt;
&lt;param name="semanticHint" value="1001"/&gt;
&lt;/metamodelType&gt;
&lt;/metamodel&gt;
</pre>
<p>In another (diagram.custom) plugin i specified the following advice:
</p>
<pre>&lt;metamodel 
nsURI="http://de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet"&gt;
&lt;adviceBinding

class="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.custom.helpers.TransitionEditHelperAdvice"

id="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.custom.TransitionAdviceBinding"
inheritance="all"

typeId="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.Transition_1001"/&gt;
&lt;/metamodel&gt;
</pre>
<p>In addition to your post i had to configure the elementTypeBinding 
for my advice and the correct client context as follows:
</p>
<pre>&lt;binding context="PetrinetClientContext"&gt;
&lt;advice 
ref="de.upb.swt.amfibia.engine.aspect.controlaspect.formalisms.petrinet.diagram.custom.TransitionAdviceBinding"/&gt;
&lt;/binding&gt;
</pre>
<a name="How_can_I_change_anchor_location_and_z-order_of_connections.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00132.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00132.html"
 rel="nofollow">How can I change anchor location and z-order of 
connections?</a></span></h4>
<ul><li><b>Q:</b> I've just started using GMF, and I have worked my way 
through the tutorial and am now starting on my own editor.
</li></ul>
<p>I have a diagram containing nodes and connections. The node figures 
are ellipses with a solid white background and a 2-px width outline. The
 connections are solid, 9-px width black lines. I want the connections 
to anchor to the center of the nodes, and for the nodes to be above the 
connections in the z-order.
</p><p>In other words, something like this:
</p>
<pre>    /---\
----|   |-----
----|   |-----
    \---/
</pre>
<p>(like on the London Tube map the way that the stations are on top of 
continuous lines&nbsp;:-)
</p><p>What I actually see is something like this:
</p>
<pre>     /---\
---| |   | |----
---| |   | |----
     \---/
</pre>
<p>Depending on the angle that the connection comes into the node at, 
there can be quite a big gap between the end of the connection and the 
node. I also don't want the user to be able to move the anchor point 
around - there should just be the one anchor point in the centre of the 
node, so I don't think connection decorations would do the trick.
</p><p>I also want the z-order of the connection point to be lower than 
all the other items in the diagram - there are different types of nodes 
that the connections won't be connected, but I want the connections to 
appear behind those nodes, not in front.
</p><p>Is it possible to do these things with GMF?
</p>
<ul><li><b>A:</b> Connection anchors (see 
org.eclipse.draw2d.ConnectionAnchor) are used to place connection ends 
so you may write your own anchor if none of the existing ones do what 
you need. Standard EllipseAnchor places connection ends on ellipse edge.
</li></ul>
<p>Nodes and connections are placed on different layers - you may swap 
the layers so connections will always be above nodes (see 
DiagramRootEditPart#createPrintableLayers()).
</p><p>You just get the FixedConnectionAnchor from Logic Example and put
 this on your XXXEditPart:
</p>
<pre>    /**
     * @generated NOT
     */
    @Override
    public ConnectionAnchor getSourceConnectionAnchor(ConnectionEditPart 
arg0) {
        FixedConnectionAnchor fixedAnchor = new FixedConnectionAnchor(
                getFigure());
        fixedAnchor.offsetH = 120;
        fixedAnchor.offsetV = 40;
        //it creates an anchor for source on point 120,40
        return fixedAnchor;
    }

    /**
     * @generated NOT
     */
    @Override
    public ConnectionAnchor getSourceConnectionAnchor(Request request) {

        FixedConnectionAnchor fixedAnchor = new FixedConnectionAnchor(
                getFigure());
        fixedAnchor.offsetH = 120;
        fixedAnchor.offsetV = 40;

return fixedAnchor;

}

    /**
     * @generated NOT
     */
    @Override
    public ConnectionAnchor getTargetConnectionAnchor(ConnectionEditPart 
arg0) {
        FixedConnectionAnchor fixedAnchor = new FixedConnectionAnchor(
                getFigure());
        fixedAnchor.offsetH = 0;
        fixedAnchor.offsetV = 40;

        return fixedAnchor;
    }

    /**
     * @generated NOT
     */
    @Override
    public ConnectionAnchor getTargetConnectionAnchor(Request request) {
        FixedConnectionAnchor fixedAnchor = new FixedConnectionAnchor(
                getFigure());
        fixedAnchor.offsetH = 0;
        fixedAnchor.offsetV = 40;

return fixedAnchor;

}
</pre>
<a name="How_can_I_disable_.27Delete_from_model.27_for_an_element.3F"></a><h4>
 <span class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00082.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00082.html"
 rel="nofollow">How can I disable 'Delete from model' for an element?</a></span></h4>
<ul><li><b>Q:</b> I create a process diagram such as 
process.process_diagram in my picture, when I doulbe click on the 
element 'a', it will programmatically open a subdiagram called 
a.diagrm.process_diagram with an element called 'data'.
</li></ul>
<p>Now, I want to disable the "delete from model" function for the 
element 'data' I created in subdiagram, what do I need to do&nbsp;?
</p>
<ul><li><b>A:</b> You could return an unexecutable command from your 
xxxSemanticEditPolicy#getDestroyElementCommand, or from your 
xxxEditHelper#getDestroyElementCommand, to disable the "Delete from 
Model" menu item for that kind of element.
</li></ul>
<p>You can take a look on plugin.xml generated for Ecore diagram editor -
 it removes "deleteFromDiagramAction" for some elements. I think you can
 remove "deleteFromModelAction" in a same way.
</p>
<pre>&lt;contributionItemProvider class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContributionItemProvider" 
checkPluginLoaded="false"&gt;
&lt;Priority name="Low"/&gt;
&lt;popupContribution class="org.eclipse.gmf.runtime.diagram.ui.providers.DiagramContextMenuProvider"&gt;
&lt;popupStructuredContributionCriteria objectClass="org.eclipse.gmf.ecore.edit.parts.EAttributeEditPart"/&gt;
&lt;popupPredefinedItem id="deleteFromDiagramAction" remove="true"/&gt;
&lt;/popupContribution&gt;
</pre>
<a name="How_can_I_vertically_center_a_label.3F"></a><h4> <span 
class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00050.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00050.html"
 rel="nofollow">How can I vertically center a label?</a></span></h4>
<ul><li><b>Q:</b> I have a node which has a name property.I want to set 
the label for the name at the vertical center of my node.I tried to use 
Constrained toolbar layout but could not get the desired result.Could 
anyone please tell me how to do it.
</li></ul>
<ul><li><b>A:</b> I think the geoshapes plugin example has this. For 
example, when you create a cylinder figure you are prompted to enter 
some name and that name appears in the center of the figure.
</li></ul>
<p>The following code will make the label come in the center. I will try
 to make a layout of it:
</p>
<pre>setLayoutManager(new StackLayout() {
  public void layout(IFigure figure) {
    Rectangle r = figure.getClientArea();
    List children = figure.getChildren();

    IFigure child;
    Dimension d;
    for (int i = 0; i &lt; children.size(); i++) {
        child = (IFigure)children.get(i);
        d = child.getPreferredSize(r.width, r.height);
        d.width = Math.min(d.width, r.width);
        d.height = Math.min(d.height, r.height);
        Rectangle childRect = new Rectangle(
          r.x + (r.width - d.width)/2,
          r.y + (r.height - d.height)/2,
          d.width,
          d.height);
        child.setBounds(childRect);
    }
  }
});
</pre>
<a name="How_can_I_obtain_the_active_tool_from_the_palette.3F"></a><h4> <span
 class="mw-headline"><a 
href="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00025.html"
 class="external text" 
title="http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg00025.html"
 rel="nofollow">How can I obtain the active tool from the palette?</a></span></h4>
<ul><li><b>Q:</b> I have added a menu item to the context menu of my gmf
 editor and want it to be activated only if a certain kind of tool is 
selected from the palette.
</li></ul>
<p>Therefore i want to check within the calculateEnabled() method of my 
action class (which is inherited from DiagramAction) which palette tool 
was selected before.
</p><p>How can I do that?
</p>
<ul><li><b>A:</b> Within your action find appropriate diagram editor 
part and adapt it to GraphicalViewer; then 
viewer.getEditDomain().getActiveTool().
</li></ul>

<!-- 
NewPP limit report
Preprocessor node count: 207/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:3793-0!1!0!!en!2!edit=0 and timestamp 20100901181808 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.eclipse.org/GMF_Newsgroup_Q_and_A">http://wiki.eclipse.org/GMF_Newsgroup_Q_and_A</a>"</div>
                    <!-- end content -->
          <div class="visualClear"></div>
        </div>
      </div>


    </div>


	<!-- Yoink of toolbox for phoenix moved up -->


  </div>
  </div>
              <div id="clearFooter">
            <div id="footer">  
	      <ul id="footernav">
                <li class="first"><a href="http://www.eclipse.org/">Home</a></li>
               	<li><a href="http://www.eclipse.org/legal/privacy.php">Privacy
 Policy</a></li>
	        <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms
 of Use</a></li>
		<li><a href="http://www.eclipse.org/legal/copyright.php">Copyright 
Agent</a></li>
                <li><a 
href="http://www.eclipse.org/org/foundation/contact.php">Contact</a></li>
               	<li><a href="http://wiki.eclipse.org/Eclipsepedia:About"
 title="Eclipsepedia:About">About Eclipsepedia</a></li>
	      </ul>
              <span id="copyright">Copyright © 2010 The Eclipse 
Foundation. All Rights Reserved</span>
	      <p id="footercredit">This page was last modified 13:17, 27 April 
2009 by <a 
href="http://wiki.eclipse.org/index.php?title=User:Peter_l.gmx.at&amp;action=edit"
 class="new" title="User:Peter l.gmx.at">Peter Lang</a>. Based on work 
by <a 
href="http://wiki.eclipse.org/index.php?title=User:Estoll.vocollect.com&amp;action=edit"
 class="new" title="User:Estoll.vocollect.com">Ed Stoll</a>, <a 
href="http://wiki.eclipse.org/index.php?title=User:Ugorox.gmail.com&amp;action=edit"
 class="new" title="User:Ugorox.gmail.com">Ugo Sangiorgi</a> and <a 
href="http://wiki.eclipse.org/index.php?title=User:Egarson.hotmail.com&amp;action=edit"
 class="new" title="User:Egarson.hotmail.com">Edward Garson</a> and <a 
href="http://wiki.eclipse.org/index.php?title=GMF_Newsgroup_Q_and_A&amp;action=credits"
 title="GMF Newsgroup Q and A">others</a>.</p>
	      <p id="footerviews">This page has been accessed 27,206 times.</p>
	    </div>

            <script type="text/javascript">
              var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
              document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
            </script><script src="GMF_Newsgroup_Q_and_A_fichiers/ga.js" type="text/javascript"></script>
            <script type="text/javascript">
              var pageTracker = _gat._getTracker("UA-910670-4");
              pageTracker._trackPageview();
            </script>
 
 	



		

<!-- 			<div class="visualClear"></div> -->
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>

<!-- Served in 0.164 secs. --></div></body></html>